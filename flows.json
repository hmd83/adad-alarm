[
    {
        "id": "55bf3aabfbc77f2a",
        "type": "tab",
        "label": "Fire Alarm",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "de3b867568fe76b6",
        "type": "subflow",
        "name": "Fire Node",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 160,
                "y": 660,
                "wires": [
                    {
                        "id": "6eaf354d0ff17d64"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1480,
                "y": 460,
                "wires": [
                    {
                        "id": "303df76fe3eff30c",
                        "port": 0
                    },
                    {
                        "id": "6c582e0d295527fb",
                        "port": 0
                    },
                    {
                        "id": "2eea238012702eca",
                        "port": 0
                    },
                    {
                        "id": "e44325bf10a15575",
                        "port": 0
                    },
                    {
                        "id": "f310d5221709244f",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "908ed317fb868fc9",
        "type": "subflow",
        "name": "Zones",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 340,
                "y": 680,
                "wires": [
                    {
                        "id": "32ebebb4080c9dae"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1760,
                "y": 720,
                "wires": [
                    {
                        "id": "afcdc071aa73ba3c",
                        "port": 0
                    },
                    {
                        "id": "a8fec83e9f391c49",
                        "port": 0
                    },
                    {
                        "id": "cda8a2ab4a3148df",
                        "port": 0
                    },
                    {
                        "id": "aa3a691427d30289",
                        "port": 0
                    },
                    {
                        "id": "f0e7299aed81503a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "69337b7ed7551a53",
        "type": "subflow",
        "name": "supervisors",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 250,
                "y": 660,
                "wires": [
                    {
                        "id": "64af30552a3ee07d"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1640,
                "y": 640,
                "wires": [
                    {
                        "id": "e86e85fb3cdcf4d2",
                        "port": 0
                    },
                    {
                        "id": "0e800deb4da15ebf",
                        "port": 0
                    },
                    {
                        "id": "5d2b7410eb409ffe",
                        "port": 0
                    },
                    {
                        "id": "9da0d4704203183d",
                        "port": 0
                    },
                    {
                        "id": "9fc31f14e9ceee85",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "8324692507d46007",
        "type": "subflow",
        "name": "Hotspots",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 360,
                "y": 440,
                "wires": [
                    {
                        "id": "72a67cb84b03ac8c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1580,
                "y": 420,
                "wires": [
                    {
                        "id": "feb1f8a2fcb8fc90",
                        "port": 0
                    },
                    {
                        "id": "e445973ea3e4d3a0",
                        "port": 0
                    },
                    {
                        "id": "c2e26a016ce64040",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "77609808ed89764b",
        "type": "subflow",
        "name": "Dashbord",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 20,
                "y": 360,
                "wires": [
                    {
                        "id": "55bf78eed0973239"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1670,
                "y": 640,
                "wires": [
                    {
                        "id": "df7dc5546a43ddde",
                        "port": 0
                    },
                    {
                        "id": "5bbc70453a4ace73",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "b32e6acae6779585",
        "type": "subflow",
        "name": "Message",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 240,
                "y": 200,
                "wires": [
                    {
                        "id": "f7d07492dbc0b0a0"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1380,
                "y": 200,
                "wires": [
                    {
                        "id": "81bcf1ba3e8b9088",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "d371f97991037310",
        "type": "subflow",
        "name": "SOS Messages",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 480,
                "wires": [
                    {
                        "id": "147a03a88e24ea55"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1300,
                "y": 460,
                "wires": [
                    {
                        "id": "636bfc5018d524f6",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "6b1a3c1500858386",
        "type": "subflow",
        "name": "alarm",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 220,
                "wires": [
                    {
                        "id": "c3f1b170a1c63294"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1160,
                "y": 280,
                "wires": [
                    {
                        "id": "c4b3f656c1db04bd",
                        "port": 0
                    },
                    {
                        "id": "c809b7a7adeb74f2",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "46a119af20396fcd",
        "type": "group",
        "z": "de3b867568fe76b6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "e1dbb1215632cb64",
            "3d43deddee46e120",
            "9b44aca61d1f579a",
            "d40a3baa9b0ebe6d"
        ],
        "x": 404,
        "y": 1279
    },
    {
        "id": "2da834aa32978368",
        "type": "group",
        "z": "de3b867568fe76b6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "d718950fd5d002b0",
            "cdd66652f6ab2048",
            "91de28e7758f6948",
            "bfd12eb958bde154",
            "4437dd12e1989c77",
            "180ced1fb8069854",
            "0a719693081b714a",
            "2fec0ffd4ff430ed",
            "6d629c572f1f478f",
            "02a7157bc6734c8e",
            "c9d3411e976ce722",
            "b3b3d2664b9f498d",
            "8840d978b3aaef3c",
            "12b0c552273fc884",
            "80ed03d08584b68d",
            "5207462dc8547e8f",
            "6c582e0d295527fb",
            "2aa9c83323f35561",
            "a16e03134701ccf4",
            "cce0cdbe1ee6d4fb",
            "f310d5221709244f",
            "702051509d3d4a58",
            "95d1ec5876b8619b",
            "cee9da890d8e25a2",
            "cf9c789c1ab2992b"
        ],
        "x": 394,
        "y": 859
    },
    {
        "id": "89e9fa8e92a389a4",
        "type": "group",
        "z": "de3b867568fe76b6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "3589d8c99e2ec941",
            "1f20304a657b1312",
            "50891a4bbe65f22b",
            "7f67b1e782b4d19a",
            "a3ed0a653c18ed1d",
            "34b13ebbe0b2c60a",
            "76b9b843763980fa",
            "eeafd281bc0d0cd6",
            "5a3796916f95330a",
            "cecf79e2b35da1cf",
            "7660710ff7fc935c",
            "ce0c6a36e37a811d",
            "bfe58ab074c1d7e8",
            "303df76fe3eff30c",
            "997c4b378ab5dd72",
            "cc5eda8f44a454fe"
        ],
        "x": 474,
        "y": 519
    },
    {
        "id": "6e8fd6b9bdd330d5",
        "type": "group",
        "z": "de3b867568fe76b6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "75ecfe71e04e0215",
            "367d21ff91174f40",
            "ad1ff58388b60940",
            "2e4e1d90fd0fc4a2",
            "26bd55a8cce63bcf",
            "e44325bf10a15575",
            "3852118eb2a0e055"
        ],
        "x": 0,
        "y": 0
    },
    {
        "id": "418f757fabc09802",
        "type": "group",
        "z": "908ed317fb868fc9",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "45f7d105fe2c1fce",
            "6e9c010b768afe12",
            "a99ca6576cf334db",
            "8197209f45ee27b3"
        ],
        "x": 684,
        "y": 1239
    },
    {
        "id": "d6f130f36ad01f38",
        "type": "group",
        "z": "908ed317fb868fc9",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "65e0903654cb697c",
            "84141bb7abcd44a1",
            "24e3874f255f46e3",
            "6e02aceecb24c3ab",
            "434c3b155e9268aa",
            "9d12c7a879069138",
            "d7389c9cd72e174c",
            "8decbc7b152c283a",
            "f7b88cb1bbc056e0",
            "c16eedfb44abf785",
            "aa3a691427d30289",
            "19ae655c6e63a898",
            "b23b40c74e326fd3",
            "f0e7299aed81503a",
            "9b75cb185da9470d",
            "012d619fcf134092",
            "f6235448313c06cd",
            "1f94dbadeec5b6a8",
            "1cfb251cc0d4df25",
            "6200806eb32cd47e",
            "e61188ad740ee812",
            "585bca1b872dc852"
        ],
        "x": 554,
        "y": 879
    },
    {
        "id": "581c8cfed33deee4",
        "type": "group",
        "z": "908ed317fb868fc9",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "073db64750846565",
            "9e99cb47f7d203ea",
            "3e0b2b59a632e515",
            "537d4570e31f5e3a",
            "b6873b6f62dcd7b8",
            "38bf53fbdb745de8",
            "c89baf994abd0333",
            "0ea8921e4908f36c",
            "8cbeece2197b1acb",
            "cda8a2ab4a3148df",
            "9b957f84c75e6d97",
            "ca51a362722ece1b",
            "76f9f49b76b4a089"
        ],
        "x": 694,
        "y": 559
    },
    {
        "id": "b40c92170361b3e6",
        "type": "group",
        "z": "908ed317fb868fc9",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "71b701cf89957d4e",
            "28400d702f026b3d",
            "7c7ca1affd09119e",
            "853642c727fbb268",
            "a8fec83e9f391c49",
            "5e350bf07ef8be0a",
            "afcdc071aa73ba3c",
            "e63208153108a582",
            "8e1f765c3f1afbf0",
            "e9e446ea57960e6f",
            "d88110e40fcef3ee",
            "3a68eb2913acdc1c",
            "913577cc0543eb10",
            "452802852c6dcc56",
            "0174124e03043ce3"
        ],
        "x": 0,
        "y": 0
    },
    {
        "id": "0444508041cba798",
        "type": "group",
        "z": "69337b7ed7551a53",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "5de534d65887f31a",
            "9826c70141667dd9",
            "f482eadb91c313fb",
            "aa846f2d9cefea74"
        ],
        "x": 744,
        "y": 1579
    },
    {
        "id": "d3b7a3379d740eb8",
        "type": "group",
        "z": "69337b7ed7551a53",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "4e72142712e67141",
            "1492e758208fea8f",
            "225a3e63285d5f6d",
            "6c665f41990e6d9f",
            "699848b4419055e2",
            "9da0d4704203183d"
        ],
        "x": 574,
        "y": 319
    },
    {
        "id": "c9315be32749249c",
        "type": "group",
        "z": "69337b7ed7551a53",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "b9ac1595d7a119f6",
            "64832323b16b2833",
            "897e229ca6088c8c",
            "812bcfa47793e7d3",
            "244b5319bb2c04a5",
            "09965168a3698aeb",
            "e86e85fb3cdcf4d2",
            "eb432369e33006dc",
            "41a22097fefecf28",
            "b29f31959b122af3",
            "a3b7b1b181e75e14",
            "29b897a7ed2b9918",
            "ba0d8b25385d6812",
            "96b60c9405283716",
            "d80bc94b82a56f03",
            "766baa3ddc93bdc8",
            "ac28294dd1801a44",
            "f59755a5a01a7127"
        ],
        "x": 534,
        "y": 499
    },
    {
        "id": "853dc2a82496e612",
        "type": "group",
        "z": "69337b7ed7551a53",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "71b091632bdb0084",
            "6149585a77b8631a",
            "0915a76bf1cb36fe",
            "a3f3247d5dd62746",
            "ad7668cbad9ed9bc",
            "a1a7a7971063c0ae",
            "21cada401e7b04c5",
            "6ad96386bea8d6cc",
            "429fee823bf8bee0",
            "6e0d9caaa31c6a43",
            "b370976ac92c8027",
            "c55658b973ef033f",
            "74631c773897f2e0",
            "a2490faba7182059",
            "f9db3a7d9b069af6",
            "2c4688783acec574",
            "22e9cff84990caf2",
            "2e1f37c2501b0845",
            "aa5113b6e33253ca",
            "9be0f49637bcc95a",
            "c597d5a198c04031",
            "3651aabdd4240713",
            "ffe7288090f2fded",
            "bb84f18d00b7ff74",
            "d1a768a4049a0391",
            "acb97b7852280565",
            "83929613cce69079",
            "53dc2991d50e6642",
            "0e800deb4da15ebf"
        ],
        "x": 594,
        "y": 839
    },
    {
        "id": "08b43b39be3bcfd4",
        "type": "group",
        "z": "8324692507d46007",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "ad70a2dfc5efe4bf",
            "3484b220ac82a5a9",
            "91a340f8ed30b83a",
            "e445973ea3e4d3a0"
        ],
        "x": 534,
        "y": 379
    },
    {
        "id": "0577e14e83b2e808",
        "type": "group",
        "z": "55bf3aabfbc77f2a",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "1f15e3ba7d59c80e",
            "f2688b345002a53b",
            "8614efb4fc63a225",
            "39edcd33d9a252ef",
            "187b8dbdf76d5725",
            "de1148d11593b7b7",
            "883073e5eeb623c9",
            "ecbb31b58326b705"
        ],
        "x": 34,
        "y": 39,
        "w": 862,
        "h": 242
    },
    {
        "id": "7f4cd69b10df6ef8",
        "type": "group",
        "z": "55bf3aabfbc77f2a",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "9368370735331bfb",
            "4563051b2368a60c",
            "dc2624aab1d16760",
            "59a0802f522499e3",
            "f9ac0c6146f66026",
            "e81c03f8f92d41c8",
            "9a2f98bb2428bafc",
            "5f0cff1223c22312",
            "e5b0cf849dc5f19c",
            "0c90ddde59815454",
            "5c95fd521be37dc4",
            "5f75adfef39623e2",
            "1312d39f67386f88",
            "0429b845e02579e0",
            "d99af6adec090d36",
            "7c8c7b0b10710c63",
            "00c8222b274d0877"
        ],
        "x": 14,
        "y": 279,
        "w": 1462,
        "h": 342
    },
    {
        "id": "bd6511f3dae3faa9",
        "type": "group",
        "z": "55bf3aabfbc77f2a",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "c3bdcd536fc4074c",
            "c495cc973c3df3d7",
            "fe6c6f35860b8305",
            "47263aace55a064c",
            "42b4408505516a8d",
            "686dd8385a46ac82",
            "228631fe5e14fc09",
            "f193b833115d2689",
            "ff014e0cb38fa5a2",
            "b024385e8b3a5c88",
            "59886134924cddea",
            "1a151aca966ec287",
            "c024360a7d70cefb",
            "00d78067f8909d5d",
            "42b89af1b64730bd",
            "1db854a1d573bb56",
            "d98e3dea16489697"
        ],
        "x": 24,
        "y": 1079,
        "w": 932,
        "h": 342
    },
    {
        "id": "2adebf06be054e3b",
        "type": "group",
        "z": "77609808ed89764b",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "a0fb8e761dbe313d",
            "3637c477d8c51c95",
            "9589cfc85d5efcaf",
            "e21993c1ef3700c9",
            "83530bcb8d42f1b9",
            "0f8150715624471d",
            "f6c2e04248a463e1",
            "374cb5fd4ee047bd",
            "f6c3fd6fd2fe7eec"
        ],
        "x": 0,
        "y": 0
    },
    {
        "id": "eb6c630d339525a4",
        "type": "group",
        "z": "de3b867568fe76b6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "2eea238012702eca",
            "6a76297f26b7e812",
            "0aced04b503b7175",
            "ea49216747f3bd01",
            "6579574d3af12688",
            "4fb3e47d07e9ce5c",
            "a2a6811b5e1abb7b",
            "173c2a75c5093c36"
        ],
        "x": 374,
        "y": 39
    },
    {
        "id": "519870bc95f0de5e",
        "type": "group",
        "z": "69337b7ed7551a53",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "71f4c02b5cce008a",
            "26c044b4a8cc4602",
            "bd4ee6c317a243a8",
            "c20e9e50b33f2388",
            "d1faf7c989bfe2b8",
            "d5bd9c10ae214427",
            "42552884d437b684",
            "3bbe7d94e43efb3b",
            "91f880c3c9c46409",
            "c654c95aea828ed2",
            "ea22fdc69aaddfcd"
        ],
        "x": 564,
        "y": 1319
    },
    {
        "id": "2b1282a1510a795e",
        "type": "group",
        "z": "69337b7ed7551a53",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "38c46b7f0335a288",
            "3cdb657141329c43",
            "f8181665a1ad3247",
            "7b7bb5c295b10a92",
            "aa48c3ccf0dcbde4",
            "92e0d283c21c79fd",
            "1019f8cfbd383f25",
            "f1c5bc34d0fdb793",
            "5fab13bce8d2846d"
        ],
        "x": 554,
        "y": 39
    },
    {
        "id": "9ed883390983f1a9",
        "type": "group",
        "z": "b32e6acae6779585",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "78316bdc2a86bcdf",
            "674483ed0359fa45",
            "f7d07492dbc0b0a0",
            "b6602cb23f5879f2",
            "e68481f611e403fb",
            "14e8710f5e014474",
            "95334f692491fd46",
            "8bfa17c5634523ea",
            "5e31fc4740ac2f7e",
            "c4635a4d9b49d9a0",
            "81bcf1ba3e8b9088",
            "1e3d60fb53c7d220",
            "435d5c7cdf1760ea",
            "57293529112bba1e",
            "8623e2092ee7199d",
            "a6f9d677aee07342",
            "e423f6629dc6cafe",
            "df6b021119c043cb"
        ],
        "x": 414,
        "y": 59
    },
    {
        "id": "4ecee52b1f66e9b9",
        "type": "junction",
        "z": "de3b867568fe76b6",
        "x": 280,
        "y": 680,
        "wires": [
            [
                "9b44aca61d1f579a"
            ]
        ]
    },
    {
        "id": "997c4b378ab5dd72",
        "type": "junction",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "x": 500,
        "y": 720,
        "wires": [
            [
                "7f67b1e782b4d19a"
            ]
        ]
    },
    {
        "id": "cee9da890d8e25a2",
        "type": "junction",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "x": 420,
        "y": 960,
        "wires": [
            [
                "0a719693081b714a",
                "2fec0ffd4ff430ed",
                "02a7157bc6734c8e",
                "6d629c572f1f478f",
                "c9d3411e976ce722"
            ]
        ]
    },
    {
        "id": "93757f0b0aae5e1e",
        "type": "junction",
        "z": "908ed317fb868fc9",
        "x": 450,
        "y": 700,
        "wires": [
            [
                "a99ca6576cf334db",
                "5e350bf07ef8be0a"
            ]
        ]
    },
    {
        "id": "f6235448313c06cd",
        "type": "junction",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "x": 580,
        "y": 980,
        "wires": [
            [
                "434c3b155e9268aa",
                "d7389c9cd72e174c",
                "9d12c7a879069138",
                "1cfb251cc0d4df25",
                "e61188ad740ee812"
            ]
        ]
    },
    {
        "id": "1d4bef3293395770",
        "type": "junction",
        "z": "69337b7ed7551a53",
        "x": 480,
        "y": 760,
        "wires": [
            [
                "f482eadb91c313fb"
            ]
        ]
    },
    {
        "id": "acb97b7852280565",
        "type": "junction",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "x": 620,
        "y": 940,
        "wires": [
            [
                "a2490faba7182059",
                "f9db3a7d9b069af6",
                "2c4688783acec574",
                "3651aabdd4240713",
                "bb84f18d00b7ff74",
                "d1a768a4049a0391",
                "ffe7288090f2fded"
            ]
        ]
    },
    {
        "id": "0e800deb4da15ebf",
        "type": "junction",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "x": 1360,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "5d2b7410eb409ffe",
        "type": "junction",
        "z": "69337b7ed7551a53",
        "x": 1500,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "9da0d4704203183d",
        "type": "junction",
        "z": "69337b7ed7551a53",
        "g": "d3b7a3379d740eb8",
        "x": 1420,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "9fc31f14e9ceee85",
        "type": "junction",
        "z": "69337b7ed7551a53",
        "x": 1500,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "1db854a1d573bb56",
        "type": "junction",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "x": 460,
        "y": 1240,
        "wires": [
            [
                "42b4408505516a8d",
                "fe6c6f35860b8305",
                "686dd8385a46ac82",
                "228631fe5e14fc09",
                "ff014e0cb38fa5a2",
                "f193b833115d2689",
                "1a151aca966ec287"
            ]
        ]
    },
    {
        "id": "559cbd2b46e78e2c",
        "type": "junction",
        "z": "6b1a3c1500858386",
        "x": 800,
        "y": 380,
        "wires": [
            [
                "8c1264366eb58bd4",
                "136bf140e76408b4",
                "70866262686fe074"
            ]
        ]
    },
    {
        "id": "c4b3f656c1db04bd",
        "type": "junction",
        "z": "6b1a3c1500858386",
        "x": 980,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "c809b7a7adeb74f2",
        "type": "junction",
        "z": "6b1a3c1500858386",
        "x": 980,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "c946664372d17fb2",
        "type": "mqtt-broker",
        "name": "",
        "broker": "127.0.0.1",
        "port": "1883",
        "tls": "",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "9d0375409ac292ac",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#469daf",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": true
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": true
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": true
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": true
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": true
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": true
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Fire Alarm",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "a2e3cc22e86e6fe9",
        "type": "ui_group",
        "name": "New Fire Node",
        "tab": "ce7cdb4dcc24c5cd",
        "order": 3,
        "disp": true,
        "width": "5",
        "collapse": false,
        "className": ""
    },
    {
        "id": "531e613ab473082b",
        "type": "Stackhero-MySQL-Server",
        "name": "",
        "host": "127.0.0.1",
        "port": "3306",
        "tls": false,
        "database": "firealarm"
    },
    {
        "id": "8c1a63641bc74f9a",
        "type": "ui_tab",
        "name": "Supervisors",
        "icon": "fa-users",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ce7cdb4dcc24c5cd",
        "type": "ui_tab",
        "name": "Fire Node",
        "icon": "fa-fire",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "a794ee3661f13a09",
        "type": "ui_group",
        "name": "Fire Nodes",
        "tab": "ce7cdb4dcc24c5cd",
        "order": 2,
        "disp": false,
        "width": 14,
        "collapse": false,
        "className": ""
    },
    {
        "id": "dashboard_group",
        "type": "ui_group",
        "name": "Node Data",
        "tab": "dashboard_tab",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "dashboard_tab",
        "type": "ui_tab",
        "name": "Dashboard",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f0e801f3dda731b4",
        "type": "ui_group",
        "name": "Edit Fire Node",
        "tab": "ce7cdb4dcc24c5cd",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "846c3a1175656210",
        "type": "ui_tab",
        "name": "Zones",
        "icon": "fa-map",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "e3002d481d11c50a",
        "type": "ui_group",
        "name": "list",
        "tab": "846c3a1175656210",
        "order": 1,
        "disp": false,
        "width": "2",
        "collapse": false,
        "className": ""
    },
    {
        "id": "56105cd48cefe0e6",
        "type": "ui_group",
        "name": "Zones",
        "tab": "846c3a1175656210",
        "order": 2,
        "disp": false,
        "width": "14",
        "collapse": false,
        "className": ""
    },
    {
        "id": "28fdd5d6ca4264d4",
        "type": "ui_group",
        "name": "New Zone",
        "tab": "846c3a1175656210",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "480a29d627671437",
        "type": "ui_group",
        "name": "Edit Zone",
        "tab": "846c3a1175656210",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "e6d868c81c195c22",
        "type": "ui_tab",
        "name": "Hotspots",
        "icon": "fa-wifi",
        "order": 7,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "761e65757e8b511d",
        "type": "ui_group",
        "name": "list",
        "tab": "8c1a63641bc74f9a",
        "order": 1,
        "disp": false,
        "width": "2",
        "collapse": false,
        "className": ""
    },
    {
        "id": "98dd237644d75f15",
        "type": "ui_group",
        "name": "supervisors",
        "tab": "8c1a63641bc74f9a",
        "order": 2,
        "disp": true,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ed82b542557def94",
        "type": "ui_group",
        "name": "New supervisor",
        "tab": "8c1a63641bc74f9a",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "95c317683bf3504a",
        "type": "ui_group",
        "name": "Edit supervisor",
        "tab": "8c1a63641bc74f9a",
        "order": 4,
        "disp": true,
        "width": "5",
        "collapse": false,
        "className": ""
    },
    {
        "id": "98cc52cc11bb5354",
        "type": "ui_group",
        "z": "69337b7ed7551a53",
        "name": "Assigning to Zones",
        "tab": "8c1a63641bc74f9a",
        "order": 5,
        "disp": true,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f7d6b2e0ad0deda0",
        "type": "ui_tab",
        "name": "Message",
        "icon": "fa-envelope-o",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "d8e23e91d6775bae",
        "type": "ui_group",
        "z": "8324692507d46007",
        "name": "list",
        "tab": "e6d868c81c195c22",
        "order": 1,
        "disp": false,
        "width": "2",
        "collapse": false,
        "className": ""
    },
    {
        "id": "0e6dd110e1df80b8",
        "type": "ui_group",
        "z": "8324692507d46007",
        "name": "Hotspots",
        "tab": "e6d868c81c195c22",
        "order": 2,
        "disp": false,
        "width": "14",
        "collapse": false,
        "className": ""
    },
    {
        "id": "935ae89ef654ceb1",
        "type": "ui_group",
        "z": "de3b867568fe76b6",
        "name": "list",
        "tab": "ce7cdb4dcc24c5cd",
        "order": 1,
        "disp": false,
        "width": "2",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9c9632a3b154a09d",
        "type": "sms77-config",
        "name": "Primary sms77 Config"
    },
    {
        "id": "eb73b8d7619e7978",
        "type": "ui_group",
        "name": "Getdata",
        "tab": "f7d6b2e0ad0deda0",
        "order": 4,
        "disp": false,
        "width": "2",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2c1e29dbc0060ca5",
        "type": "ui_group",
        "name": "start",
        "tab": "f7d6b2e0ad0deda0",
        "order": 1,
        "disp": false,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ba8f350ed65a20c8",
        "type": "ui_group",
        "name": "end",
        "tab": "f7d6b2e0ad0deda0",
        "order": 2,
        "disp": false,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "faee5a99c953c61b",
        "type": "sms77-config",
        "name": "Live"
    },
    {
        "id": "f717b8a48614d3d9",
        "type": "ui_group",
        "z": "b32e6acae6779585",
        "d": true,
        "name": "Chart",
        "tab": "f7d6b2e0ad0deda0",
        "order": 6,
        "disp": false,
        "width": "23",
        "collapse": false,
        "className": ""
    },
    {
        "id": "27662f8227012deb",
        "type": "ui_group",
        "name": "Table",
        "tab": "dashboard_tab",
        "order": 1,
        "disp": false,
        "width": "14",
        "collapse": false,
        "className": ""
    },
    {
        "id": "cb9039cb4e5b6965",
        "type": "ui_spacer",
        "z": "55bf3aabfbc77f2a",
        "name": "spacer",
        "group": "27662f8227012deb",
        "order": 4,
        "width": 2,
        "height": 1
    },
    {
        "id": "f21069c4277baefc",
        "type": "ui_group",
        "name": "Messages",
        "tab": "f7d6b2e0ad0deda0",
        "order": 5,
        "disp": false,
        "width": "23",
        "collapse": false,
        "className": ""
    },
    {
        "id": "86643990d0e8938e",
        "type": "ui_tab",
        "name": "SOS Messages",
        "icon": "favorite",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "7489f633877e3b17",
        "type": "ui_group",
        "name": "start",
        "tab": "86643990d0e8938e",
        "order": 1,
        "disp": false,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "967e611fbc5d885c",
        "type": "ui_group",
        "name": "end",
        "tab": "86643990d0e8938e",
        "order": 2,
        "disp": false,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f2e382f4787dd001",
        "type": "ui_group",
        "name": "Getdata",
        "tab": "86643990d0e8938e",
        "order": 4,
        "disp": false,
        "width": "2",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ba4694cd6473a54c",
        "type": "ui_group",
        "name": "Messages",
        "tab": "86643990d0e8938e",
        "order": 5,
        "disp": false,
        "width": "23",
        "collapse": false,
        "className": ""
    },
    {
        "id": "6af3aa72e0f4a854",
        "type": "ui_group",
        "name": "Zone",
        "tab": "f7d6b2e0ad0deda0",
        "order": 3,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "331c370556bfc7bd",
        "type": "ui_group",
        "name": "Zone",
        "tab": "86643990d0e8938e",
        "order": 3,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2eea238012702eca",
        "type": "function",
        "z": "de3b867568fe76b6",
        "g": "eb6c630d339525a4",
        "name": "get all  fire_nodes from db",
        "func": "var sql=flow.get(\"sql\");\nmsg.topic = sql.reqall;\nmsg.payload = {};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1210,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "75ecfe71e04e0215",
        "type": "ui_table",
        "z": "de3b867568fe76b6",
        "g": "6e8fd6b9bdd330d5",
        "group": "a794ee3661f13a09",
        "name": "fire nodes",
        "order": 3,
        "width": "14",
        "height": "10",
        "columns": [
            {
                "field": "No.",
                "title": "No.",
                "width": "",
                "align": "left",
                "formatter": "rownum",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "dev_eui",
                "title": "dev_eui",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "name",
                "title": "name",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "latitude",
                "title": "latitude",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "longitude",
                "title": "longitude",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "zone_id",
                "title": "zone_id",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "zone_name",
                "title": "zone_name",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "status",
                "title": "Online",
                "width": "",
                "align": "left",
                "formatter": "tickCross",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 560,
        "y": 380,
        "wires": [
            [
                "367d21ff91174f40",
                "ad1ff58388b60940",
                "2e4e1d90fd0fc4a2"
            ]
        ]
    },
    {
        "id": "6eaf354d0ff17d64",
        "type": "switch",
        "z": "de3b867568fe76b6",
        "name": "sql",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "sql.reqall",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.reqone",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.getzones",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.insone",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.updone",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.delone",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 6,
        "x": 225,
        "y": 660,
        "wires": [
            [
                "75ecfe71e04e0215"
            ],
            [
                "cee9da890d8e25a2"
            ],
            [],
            [
                "4ecee52b1f66e9b9"
            ],
            [
                "4ecee52b1f66e9b9"
            ],
            [
                "4ecee52b1f66e9b9"
            ]
        ],
        "l": false
    },
    {
        "id": "3589d8c99e2ec941",
        "type": "ui_text_input",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "",
        "label": "name",
        "tooltip": "",
        "group": "a2e3cc22e86e6fe9",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "300",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 590,
        "y": 600,
        "wires": [
            [
                "a3ed0a653c18ed1d"
            ]
        ]
    },
    {
        "id": "1f20304a657b1312",
        "type": "ui_text_input",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "",
        "label": "latitude",
        "tooltip": "",
        "group": "a2e3cc22e86e6fe9",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "300",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 580,
        "y": 640,
        "wires": [
            [
                "34b13ebbe0b2c60a"
            ]
        ]
    },
    {
        "id": "50891a4bbe65f22b",
        "type": "ui_text_input",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "",
        "label": "longitude",
        "tooltip": "",
        "group": "a2e3cc22e86e6fe9",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 580,
        "y": 680,
        "wires": [
            [
                "76b9b843763980fa"
            ]
        ]
    },
    {
        "id": "7f67b1e782b4d19a",
        "type": "ui_dropdown",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "",
        "label": "zone",
        "tooltip": "",
        "place": "Select option",
        "group": "a2e3cc22e86e6fe9",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 590,
        "y": 720,
        "wires": [
            [
                "eeafd281bc0d0cd6"
            ]
        ]
    },
    {
        "id": "303df76fe3eff30c",
        "type": "function",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "INSERT new  fire_nodes to db",
        "func": "var sql = flow.get(\"sql\");\nvar newnode = flow.get('newnode');\nif(msg.payload===true){\n    msg.topic = sql.insone;\n\nmsg.payload = {\n    dev_eui: newnode.dev_eui,\n    name: newnode.name,\n    latitude: newnode.latitude,\n    longitude: newnode.longitude,\n    zone_id: newnode.zone_id\n};\n   flow.set(\"newnode\");\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "a3ed0a653c18ed1d",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "name",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newnode.name",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 675,
        "y": 600,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "34b13ebbe0b2c60a",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "latitude",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newnode.latitude",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 675,
        "y": 640,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "76b9b843763980fa",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "longitude",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newnode.longitude",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 675,
        "y": 680,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "eeafd281bc0d0cd6",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "zone_id",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newnode.zone_id",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 675,
        "y": 720,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "5a3796916f95330a",
        "type": "ui_button",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "",
        "group": "a2e3cc22e86e6fe9",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "save",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "topic",
        "topicType": "msg",
        "x": 590,
        "y": 760,
        "wires": [
            [
                "303df76fe3eff30c"
            ]
        ]
    },
    {
        "id": "cecf79e2b35da1cf",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "dev_eui",
        "rules": [
            {
                "t": "set",
                "p": "newnode.dev_eui",
                "pt": "flow",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 675,
        "y": 560,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "7660710ff7fc935c",
        "type": "ui_text_input",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "",
        "label": "dev_eui",
        "tooltip": "",
        "group": "a2e3cc22e86e6fe9",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "300",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 580,
        "y": 560,
        "wires": [
            [
                "cecf79e2b35da1cf"
            ]
        ]
    },
    {
        "id": "6a76297f26b7e812",
        "type": "ui_button",
        "z": "de3b867568fe76b6",
        "g": "eb6c630d339525a4",
        "name": "",
        "group": "935ae89ef654ceb1",
        "order": 1,
        "width": "2",
        "height": "1",
        "passthru": true,
        "label": "refresh data",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Fire_Node_New_Fire_Node\",\"Fire_Node_Edit_Fire_Node\"],\"show\":[\"Fire_Node_list\",\"Fire_Node_Fire_Nodes\"],\"focus\":false}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 890,
        "y": 200,
        "wires": [
            [
                "2eea238012702eca",
                "ea49216747f3bd01"
            ]
        ]
    },
    {
        "id": "0aced04b503b7175",
        "type": "ui_button",
        "z": "de3b867568fe76b6",
        "g": "eb6c630d339525a4",
        "name": "",
        "group": "935ae89ef654ceb1",
        "order": 2,
        "width": "2",
        "height": "1",
        "passthru": false,
        "label": "New",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Fire_Node_Fire_Nodes\",\"Fire_Node_Edit_Fire_Node\"],\"show\":[\"Fire_Node_New_Fire_Node\"],\"focus\":true}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 870,
        "y": 140,
        "wires": [
            [
                "ea49216747f3bd01"
            ]
        ]
    },
    {
        "id": "d718950fd5d002b0",
        "type": "ui_text_input",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "",
        "label": "name",
        "tooltip": "",
        "group": "f0e801f3dda731b4",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 670,
        "y": 940,
        "wires": [
            [
                "8840d978b3aaef3c"
            ]
        ]
    },
    {
        "id": "cdd66652f6ab2048",
        "type": "ui_text_input",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "",
        "label": "latitude",
        "tooltip": "",
        "group": "f0e801f3dda731b4",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "300",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 660,
        "y": 980,
        "wires": [
            [
                "12b0c552273fc884"
            ]
        ]
    },
    {
        "id": "91de28e7758f6948",
        "type": "ui_text_input",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "",
        "label": "longitude",
        "tooltip": "",
        "group": "f0e801f3dda731b4",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 660,
        "y": 1020,
        "wires": [
            [
                "80ed03d08584b68d"
            ]
        ]
    },
    {
        "id": "bfd12eb958bde154",
        "type": "ui_dropdown",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "",
        "label": "zone",
        "tooltip": "",
        "place": "Select option",
        "group": "f0e801f3dda731b4",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 670,
        "y": 1080,
        "wires": [
            [
                "5207462dc8547e8f"
            ]
        ]
    },
    {
        "id": "4437dd12e1989c77",
        "type": "ui_button",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "",
        "group": "f0e801f3dda731b4",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "save",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "topic",
        "topicType": "msg",
        "x": 670,
        "y": 1120,
        "wires": [
            [
                "6c582e0d295527fb"
            ]
        ]
    },
    {
        "id": "180ced1fb8069854",
        "type": "function",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "get zones from db",
        "func": "\nmsg.options = global.get(\"zonelist\");\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 435,
        "y": 1080,
        "wires": [
            [
                "997c4b378ab5dd72",
                "bfd12eb958bde154"
            ]
        ],
        "l": false
    },
    {
        "id": "e44325bf10a15575",
        "type": "function",
        "z": "de3b867568fe76b6",
        "g": "6e8fd6b9bdd330d5",
        "name": "get data for selected  fire_nodes from db",
        "func": "var sql = flow.get(\"sql\");\n\nvar dev_eui = msg.payload;\nmsg.topic = sql.reqone;\nmsg.payload = { dev_eui: dev_eui};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "0a719693081b714a",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "payload[0].dev_eui",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].dev_eui",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 565,
        "y": 900,
        "wires": [
            [
                "2aa9c83323f35561"
            ]
        ],
        "l": false
    },
    {
        "id": "2fec0ffd4ff430ed",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "payload[0].name",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].name",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 565,
        "y": 940,
        "wires": [
            [
                "d718950fd5d002b0"
            ]
        ],
        "l": false
    },
    {
        "id": "6d629c572f1f478f",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "payload[0].longitude",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].longitude",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 565,
        "y": 1020,
        "wires": [
            [
                "91de28e7758f6948"
            ]
        ],
        "l": false
    },
    {
        "id": "02a7157bc6734c8e",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "payload[0].latitude",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].latitude",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 565,
        "y": 980,
        "wires": [
            [
                "cdd66652f6ab2048"
            ]
        ],
        "l": false
    },
    {
        "id": "c9d3411e976ce722",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "payload[0].zone_id",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].zone_id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 565,
        "y": 1060,
        "wires": [
            [
                "bfd12eb958bde154"
            ]
        ],
        "l": false
    },
    {
        "id": "b3b3d2664b9f498d",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "dev_eui",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "editnode.dev_eui",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 755,
        "y": 900,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "8840d978b3aaef3c",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "name",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "editnode.name",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 755,
        "y": 940,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "12b0c552273fc884",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "latitude",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "editnode.latitude",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 755,
        "y": 980,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "80ed03d08584b68d",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "longitude",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "editnode.longitude",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 755,
        "y": 1020,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "5207462dc8547e8f",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "zone_id",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "editnode.zone_id",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 755,
        "y": 1080,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "6c582e0d295527fb",
        "type": "function",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "UPDATE fire_node",
        "func": "var editnode = flow.get('editnode');\nvar sql = flow.get(\"sql\");\n\nif(msg.payload===true){\nmsg.topic = sql.updone;\nmsg.payload = {\n    dev_eui: editnode.dev_eui,\n    name: editnode.name,\n    latitude: editnode.latitude,\n    longitude: editnode.longitude,\n    zone_id: editnode.zone_id\n};\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "2aa9c83323f35561",
        "type": "ui_text_input",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "",
        "label": "dev_eui",
        "tooltip": "",
        "group": "f0e801f3dda731b4",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 660,
        "y": 900,
        "wires": [
            [
                "b3b3d2664b9f498d"
            ]
        ]
    },
    {
        "id": "367d21ff91174f40",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "6e8fd6b9bdd330d5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "msg.payload.dev_eui",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 875,
        "y": 440,
        "wires": [
            [
                "e44325bf10a15575"
            ]
        ],
        "l": false
    },
    {
        "id": "ad1ff58388b60940",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "6e8fd6b9bdd330d5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Fire_Node_New_Fire_Node\"],\"show\":[\"Fire_Node_Fire_Nodes\",\"Fire_Node_Edit_Fire_Node\"],\"focus\":false}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 705,
        "y": 340,
        "wires": [
            [
                "26bd55a8cce63bcf"
            ]
        ],
        "l": false
    },
    {
        "id": "2e4e1d90fd0fc4a2",
        "type": "function",
        "z": "de3b867568fe76b6",
        "g": "6e8fd6b9bdd330d5",
        "name": "Points",
        "func": "var dev_eui= msg.payload.dev_eui;\nvar     zone_name= msg.payload.zone_name;\n var      lat= parseFloat(msg.payload.latitude);\n var             lon=msg.payload.longitude;\n var                name= msg.payload.name;\n\n\nmsg.payload = {\n    dev_eui: dev_eui,\n    zone_name:zone_name,\n    lat: parseFloat(lat) ,\n    lon: parseFloat(lon),\n    name:name,\n    icon: \"fa-tree\",\n    color: \"#000\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 765,
        "y": 380,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "a16e03134701ccf4",
        "type": "ui_button",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "",
        "group": "f0e801f3dda731b4",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "close",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Fire_Node_New_Fire_Node\",\"Fire_Node_Edit_Fire_Node\"],\"show\":[\"Fire_Node_Fire_Nodes\"],\"focus\":true}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 670,
        "y": 1160,
        "wires": [
            [
                "cce0cdbe1ee6d4fb"
            ]
        ]
    },
    {
        "id": "cce0cdbe1ee6d4fb",
        "type": "ui_ui_control",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "",
        "events": "all",
        "x": 745,
        "y": 1160,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "ce0c6a36e37a811d",
        "type": "ui_ui_control",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "",
        "events": "all",
        "x": 695,
        "y": 800,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "bfe58ab074c1d7e8",
        "type": "ui_button",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "",
        "group": "a2e3cc22e86e6fe9",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "close",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Fire_Node_New_Fire_Node\",\"Fire_Node_Edit_Fire_Node\"],\"show\":[\"Fire_Node_Fire_Nodes\"],\"focus\":true}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 590,
        "y": 800,
        "wires": [
            [
                "ce0c6a36e37a811d"
            ]
        ]
    },
    {
        "id": "ea49216747f3bd01",
        "type": "ui_ui_control",
        "z": "de3b867568fe76b6",
        "g": "eb6c630d339525a4",
        "name": "",
        "events": "all",
        "x": 1035,
        "y": 160,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "26bd55a8cce63bcf",
        "type": "ui_ui_control",
        "z": "de3b867568fe76b6",
        "g": "6e8fd6b9bdd330d5",
        "name": "",
        "events": "all",
        "x": 745,
        "y": 340,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "e1dbb1215632cb64",
        "type": "ui_toast",
        "z": "de3b867568fe76b6",
        "g": "46a119af20396fcd",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 850,
        "y": 1340,
        "wires": []
    },
    {
        "id": "3d43deddee46e120",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "46a119af20396fcd",
        "name": "Data Updated ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Data Updated ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 1320,
        "wires": [
            [
                "e1dbb1215632cb64"
            ]
        ]
    },
    {
        "id": "9b44aca61d1f579a",
        "type": "switch",
        "z": "de3b867568fe76b6",
        "g": "46a119af20396fcd",
        "name": "",
        "property": "payload.affectedRows",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 445,
        "y": 1340,
        "wires": [
            [
                "3d43deddee46e120"
            ],
            [
                "d40a3baa9b0ebe6d"
            ]
        ],
        "l": false
    },
    {
        "id": "d40a3baa9b0ebe6d",
        "type": "change",
        "z": "de3b867568fe76b6",
        "g": "46a119af20396fcd",
        "name": "error.message",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 1360,
        "wires": [
            [
                "e1dbb1215632cb64"
            ]
        ]
    },
    {
        "id": "f310d5221709244f",
        "type": "function",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "DELETE  fire_node",
        "func": "var editnode = flow.get('editnode');\nvar sql = flow.get(\"sql\");\n\nif (msg.payload === \"Delete\"){\n  \n    msg.topic = sql.delone;\nmsg.payload = {\n  dev_eui: editnode.dev_eui\n};\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "702051509d3d4a58",
        "type": "ui_button",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "",
        "group": "f0e801f3dda731b4",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "DELETE ",
        "tooltip": "",
        "color": "red",
        "bgcolor": "",
        "className": "",
        "icon": "fa-trash",
        "payload": "are you sure ?",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 660,
        "y": 1200,
        "wires": [
            [
                "95d1ec5876b8619b"
            ]
        ]
    },
    {
        "id": "95d1ec5876b8619b",
        "type": "ui_toast",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "Delete",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "are you sure ?",
        "x": 920,
        "y": 1200,
        "wires": [
            [
                "f310d5221709244f"
            ]
        ]
    },
    {
        "id": "173c2a75c5093c36",
        "type": "function",
        "z": "de3b867568fe76b6",
        "g": "eb6c630d339525a4",
        "name": "node SQL query  as object",
        "func": "",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\nvar queries = {\n    reqall: \"SELECT fire_nodes.dev_eui, fire_nodes.name, fire_nodes.longitude, fire_nodes.latitude,  fire_nodes.status, fire_nodes.zone_id, zones.name AS zone_name FROM fire_nodes JOIN zones ON fire_nodes.zone_id = zones.id;\",\n    insone: \"INSERT INTO fire_nodes (dev_eui, name, latitude, longitude, zone_id) VALUES (:dev_eui, :name, :latitude, :longitude, :zone_id);\",\n    reqone: \"SELECT fire_nodes.dev_eui, fire_nodes.name, fire_nodes.longitude, fire_nodes.latitude, fire_nodes.zone_id, zones.name AS zone_name FROM fire_nodes JOIN zones ON fire_nodes.zone_id = zones.id WHERE fire_nodes.dev_eui LIKE :dev_eui;\",\n    updone: \"UPDATE fire_nodes SET name = :name, latitude = :latitude, longitude = :longitude, zone_id = :zone_id WHERE dev_eui = :dev_eui;\",\n    delone: \"DELETE FROM fire_nodes WHERE dev_eui LIKE :dev_eui;\",\n    getzones: \"SELECT * FROM zones;\"\n};\n\n// Save the variable in the Node-RED flow context\nflow.set('sql', queries);\nflow.set('newnode');\n\n",
        "finalize": "",
        "libs": [],
        "x": 1190,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "6579574d3af12688",
        "type": "ui_ui_control",
        "z": "de3b867568fe76b6",
        "g": "eb6c630d339525a4",
        "name": "",
        "events": "change",
        "x": 460,
        "y": 140,
        "wires": [
            [
                "4fb3e47d07e9ce5c"
            ]
        ]
    },
    {
        "id": "4fb3e47d07e9ce5c",
        "type": "switch",
        "z": "de3b867568fe76b6",
        "g": "eb6c630d339525a4",
        "name": "hide edit and new ",
        "property": "name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Fire Node",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 140,
        "wires": [
            [
                "6a76297f26b7e812",
                "180ced1fb8069854"
            ]
        ]
    },
    {
        "id": "a2a6811b5e1abb7b",
        "type": "comment",
        "z": "de3b867568fe76b6",
        "g": "eb6c630d339525a4",
        "name": "get all  fire nodes from db",
        "info": "",
        "x": 530,
        "y": 80,
        "wires": []
    },
    {
        "id": "3852118eb2a0e055",
        "type": "comment",
        "z": "de3b867568fe76b6",
        "g": "6e8fd6b9bdd330d5",
        "name": "Show  fire nodes from db to table  ",
        "info": "",
        "x": 590,
        "y": 300,
        "wires": []
    },
    {
        "id": "cf9c789c1ab2992b",
        "type": "comment",
        "z": "de3b867568fe76b6",
        "g": "2da834aa32978368",
        "name": "edit fire node and update table in db  ",
        "info": "",
        "x": 980,
        "y": 920,
        "wires": []
    },
    {
        "id": "cc5eda8f44a454fe",
        "type": "comment",
        "z": "de3b867568fe76b6",
        "g": "89e9fa8e92a389a4",
        "name": "add new fire to  db  ",
        "info": "",
        "x": 870,
        "y": 580,
        "wires": []
    },
    {
        "id": "afcdc071aa73ba3c",
        "type": "function",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "get all  Zone from db",
        "func": "var sql=flow.get(\"sql\");\nmsg.topic = sql.reqall;\nmsg.payload = {};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "32ebebb4080c9dae",
        "type": "switch",
        "z": "908ed317fb868fc9",
        "name": "sql",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "sql.reqall",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.reqone",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.insone",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.updone",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.delone",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 395,
        "y": 680,
        "wires": [
            [
                "71b701cf89957d4e",
                "a3558769a084d368"
            ],
            [
                "f6235448313c06cd"
            ],
            [
                "93757f0b0aae5e1e"
            ],
            [
                "93757f0b0aae5e1e"
            ],
            [
                "93757f0b0aae5e1e"
            ]
        ],
        "l": false
    },
    {
        "id": "5e350bf07ef8be0a",
        "type": "ui_button",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "",
        "group": "e3002d481d11c50a",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "refresh data",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Zones_New_Zone\",\"Zones_Edit_Zone\"],\"show\":[\"Zones_Zones\"],\"focus\":true}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 970,
        "y": 420,
        "wires": [
            [
                "afcdc071aa73ba3c",
                "e9e446ea57960e6f"
            ]
        ]
    },
    {
        "id": "8e1f765c3f1afbf0",
        "type": "ui_button",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "",
        "group": "e3002d481d11c50a",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "New",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Zones_Zones\",\"Zones_Edit_Zone\"],\"show\":[\"Zones_New_Zone\"],\"focus\":true}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 970,
        "y": 460,
        "wires": [
            [
                "e9e446ea57960e6f"
            ]
        ]
    },
    {
        "id": "e9e446ea57960e6f",
        "type": "ui_ui_control",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "",
        "events": "all",
        "x": 1135,
        "y": 440,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "452802852c6dcc56",
        "type": "function",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "Zones SQL query  as object",
        "func": "",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\nvar queries = {\n    reqall: \"SELECT * FROM zones;\",\n    insone: \"INSERT INTO zones ( name, latitude, longitude, radius) VALUES ( :name, :latitude, :longitude, :radius);\",\n    reqone: \"SELECT * FROM zones WHERE id = :id;\",\n    updone: \"UPDATE zones SET name = :name, latitude = :latitude, longitude = :longitude, radius = :radius WHERE id = :id;\",\n    delone: \"DELETE FROM zones WHERE id = :id;\",\n};\n\n// Save the variable in the Node-RED flow context\nflow.set('sql', queries);\nglobal.set(\"zonelist\");",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "3a68eb2913acdc1c",
        "type": "ui_ui_control",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "",
        "events": "change",
        "x": 575,
        "y": 420,
        "wires": [
            [
                "d88110e40fcef3ee"
            ]
        ],
        "l": false
    },
    {
        "id": "d88110e40fcef3ee",
        "type": "switch",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "hide edit and new ",
        "property": "name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Zones",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 790,
        "y": 420,
        "wires": [
            [
                "5e350bf07ef8be0a"
            ]
        ]
    },
    {
        "id": "45f7d105fe2c1fce",
        "type": "ui_toast",
        "z": "908ed317fb868fc9",
        "g": "418f757fabc09802",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1130,
        "y": 1300,
        "wires": []
    },
    {
        "id": "6e9c010b768afe12",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "418f757fabc09802",
        "name": "Data Updated ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Data Updated ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 1280,
        "wires": [
            [
                "45f7d105fe2c1fce"
            ]
        ]
    },
    {
        "id": "a99ca6576cf334db",
        "type": "switch",
        "z": "908ed317fb868fc9",
        "g": "418f757fabc09802",
        "name": "",
        "property": "payload.affectedRows",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 725,
        "y": 1300,
        "wires": [
            [
                "6e9c010b768afe12"
            ],
            [
                "8197209f45ee27b3"
            ]
        ],
        "l": false
    },
    {
        "id": "8197209f45ee27b3",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "418f757fabc09802",
        "name": "error.message",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 1320,
        "wires": [
            [
                "45f7d105fe2c1fce"
            ]
        ]
    },
    {
        "id": "65e0903654cb697c",
        "type": "ui_text_input",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "",
        "label": "name",
        "tooltip": "",
        "group": "480a29d627671437",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 810,
        "y": 920,
        "wires": [
            [
                "8decbc7b152c283a"
            ]
        ]
    },
    {
        "id": "84141bb7abcd44a1",
        "type": "ui_text_input",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "",
        "label": "latitude",
        "tooltip": "",
        "group": "480a29d627671437",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "300",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 800,
        "y": 960,
        "wires": [
            [
                "f7b88cb1bbc056e0"
            ]
        ]
    },
    {
        "id": "24e3874f255f46e3",
        "type": "ui_text_input",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "",
        "label": "longitude",
        "tooltip": "",
        "group": "480a29d627671437",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 800,
        "y": 1000,
        "wires": [
            [
                "c16eedfb44abf785"
            ]
        ]
    },
    {
        "id": "6e02aceecb24c3ab",
        "type": "ui_button",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "",
        "group": "480a29d627671437",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "save",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "topic",
        "topicType": "msg",
        "x": 810,
        "y": 1100,
        "wires": [
            [
                "aa3a691427d30289"
            ]
        ]
    },
    {
        "id": "434c3b155e9268aa",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "payload[0].name",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].name",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 705,
        "y": 920,
        "wires": [
            [
                "65e0903654cb697c"
            ]
        ],
        "l": false
    },
    {
        "id": "9d12c7a879069138",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "payload[0].longitude",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].longitude",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 705,
        "y": 1000,
        "wires": [
            [
                "24e3874f255f46e3"
            ]
        ],
        "l": false
    },
    {
        "id": "d7389c9cd72e174c",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "payload[0].latitude",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].latitude",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 705,
        "y": 960,
        "wires": [
            [
                "84141bb7abcd44a1"
            ]
        ],
        "l": false
    },
    {
        "id": "8decbc7b152c283a",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "name",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "edit.name",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 895,
        "y": 920,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "f7b88cb1bbc056e0",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "latitude",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "edit.latitude",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 895,
        "y": 960,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "c16eedfb44abf785",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "longitude",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "edit.longitude",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 895,
        "y": 1000,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "aa3a691427d30289",
        "type": "function",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "UPDATE Zone",
        "func": "var edit = flow.get('edit');\nvar sql = flow.get(\"sql\");\n\nif(msg.payload===true){\nmsg.topic = sql.updone;\nmsg.payload = {\n    id: edit.id,\n    name: edit.name,\n    latitude: edit.latitude,\n    longitude: edit.longitude,\n  radius: edit.radius\n  };\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "19ae655c6e63a898",
        "type": "ui_button",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "",
        "group": "480a29d627671437",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "close",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Zones_New_Zone\",\"Zones_Edit_Zone\"],\"show\":[\"Zones_Zones\"],\"focus\":true}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 810,
        "y": 1140,
        "wires": [
            [
                "b23b40c74e326fd3"
            ]
        ]
    },
    {
        "id": "b23b40c74e326fd3",
        "type": "ui_ui_control",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "",
        "events": "all",
        "x": 885,
        "y": 1140,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "f0e7299aed81503a",
        "type": "function",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "DELETE  fire_node",
        "func": "var edit = flow.get('edit');\nvar sql = flow.get(\"sql\");\n\nif (msg.payload === \"Delete\"){\n  \n    msg.topic = sql.delone;\nmsg.payload = {\n  id: edit.id\n};\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "9b75cb185da9470d",
        "type": "ui_button",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "",
        "group": "480a29d627671437",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "DELETE ",
        "tooltip": "",
        "color": "red",
        "bgcolor": "",
        "className": "",
        "icon": "fa-trash",
        "payload": "are you sure ?",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 800,
        "y": 1180,
        "wires": [
            [
                "012d619fcf134092"
            ]
        ]
    },
    {
        "id": "012d619fcf134092",
        "type": "ui_toast",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "Delete",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "are you sure ?",
        "x": 1060,
        "y": 1180,
        "wires": [
            [
                "f0e7299aed81503a"
            ]
        ]
    },
    {
        "id": "073db64750846565",
        "type": "ui_text_input",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "",
        "label": "name",
        "tooltip": "",
        "group": "28fdd5d6ca4264d4",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 790,
        "y": 600,
        "wires": [
            [
                "537d4570e31f5e3a"
            ]
        ]
    },
    {
        "id": "9e99cb47f7d203ea",
        "type": "ui_text_input",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "",
        "label": "latitude",
        "tooltip": "",
        "group": "28fdd5d6ca4264d4",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 780,
        "y": 640,
        "wires": [
            [
                "b6873b6f62dcd7b8"
            ]
        ]
    },
    {
        "id": "3e0b2b59a632e515",
        "type": "ui_text_input",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "",
        "label": "longitude",
        "tooltip": "",
        "group": "28fdd5d6ca4264d4",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 780,
        "y": 680,
        "wires": [
            [
                "38bf53fbdb745de8"
            ]
        ]
    },
    {
        "id": "537d4570e31f5e3a",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "name",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newzone.name",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 875,
        "y": 600,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "b6873b6f62dcd7b8",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "latitude",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newzone.latitude",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 875,
        "y": 640,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "38bf53fbdb745de8",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "longitude",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newzone.longitude",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 875,
        "y": 680,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "c89baf994abd0333",
        "type": "ui_button",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "",
        "group": "28fdd5d6ca4264d4",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "save",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "topic",
        "topicType": "msg",
        "x": 790,
        "y": 760,
        "wires": [
            [
                "cda8a2ab4a3148df"
            ]
        ]
    },
    {
        "id": "0ea8921e4908f36c",
        "type": "ui_ui_control",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "",
        "events": "all",
        "x": 895,
        "y": 800,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "8cbeece2197b1acb",
        "type": "ui_button",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "",
        "group": "28fdd5d6ca4264d4",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "close",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Zones_New_Zone\",\"Zones_Edit_Zone\"],\"show\":[\"Zones_Zones\"],\"focus\":true}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 790,
        "y": 800,
        "wires": [
            [
                "0ea8921e4908f36c"
            ]
        ]
    },
    {
        "id": "cda8a2ab4a3148df",
        "type": "function",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "INSERT new Zone to db",
        "func": "var sql = flow.get(\"sql\");\nvar newzone = flow.get('newzone');\nif(msg.payload===true){\n    msg.topic = sql.insone;\n\nmsg.payload = {\n      name: newzone.name,\n    latitude: newzone.latitude,\n    longitude: newzone.longitude,\n    radius: newzone.radius\n};\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1350,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "71b701cf89957d4e",
        "type": "ui_table",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "group": "56105cd48cefe0e6",
        "name": "Zones",
        "order": 4,
        "width": "14",
        "height": "10",
        "columns": [
            {
                "field": "No.",
                "title": "No.",
                "width": "",
                "align": "left",
                "formatter": "rownum",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "id",
                "title": "id",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "name",
                "title": "name",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "latitude",
                "title": "latitude",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "longitude",
                "title": "longitude",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "radius",
                "title": "radius",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 690,
        "y": 320,
        "wires": [
            [
                "28400d702f026b3d",
                "7c7ca1affd09119e",
                "a8fec83e9f391c49"
            ]
        ]
    },
    {
        "id": "28400d702f026b3d",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Zones_New_Zone\"],\"show\":[\"Zones_Zones\",\"Zones_Edit_Zone\"],\"focus\":true}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 925,
        "y": 300,
        "wires": [
            [
                "853642c727fbb268"
            ]
        ],
        "l": false
    },
    {
        "id": "7c7ca1affd09119e",
        "type": "function",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "Points",
        "func": "\n var      lat= parseFloat(msg.payload.latitude);\n var             lon=msg.payload.longitude;\n var                name= msg.payload.name;\n\n\nmsg.payload = {\n  \n    lat: parseFloat(lat) ,\n    lon: parseFloat(lon),\n    name:name,\n    icon: \"fa-map-marker\",\n    color: \"#000\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1215,
        "y": 360,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "853642c727fbb268",
        "type": "ui_ui_control",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "",
        "events": "all",
        "x": 985,
        "y": 300,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "a8fec83e9f391c49",
        "type": "function",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "get data for selected  zone from db",
        "func": "var sql = flow.get(\"sql\");\n\nvar id = msg.payload.id;\nmsg.topic = sql.reqone;\nmsg.payload = { id: id};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "9b957f84c75e6d97",
        "type": "ui_text_input",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "",
        "label": "radius",
        "tooltip": "",
        "group": "28fdd5d6ca4264d4",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 770,
        "y": 720,
        "wires": [
            [
                "ca51a362722ece1b"
            ]
        ]
    },
    {
        "id": "1f94dbadeec5b6a8",
        "type": "ui_text_input",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "",
        "label": "radius",
        "tooltip": "",
        "group": "480a29d627671437",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 810,
        "y": 1040,
        "wires": [
            [
                "6200806eb32cd47e"
            ]
        ]
    },
    {
        "id": "1cfb251cc0d4df25",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "payload[0].radius",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].radius",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 705,
        "y": 1040,
        "wires": [
            [
                "1f94dbadeec5b6a8"
            ]
        ],
        "l": false
    },
    {
        "id": "6200806eb32cd47e",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "radius",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "edit.radius",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 895,
        "y": 1040,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "ca51a362722ece1b",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "radius",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newzone.radius",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 865,
        "y": 720,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "e61188ad740ee812",
        "type": "change",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "payload[0].id",
        "rules": [
            {
                "t": "set",
                "p": "edit.id",
                "pt": "flow",
                "to": "payload[0].id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 705,
        "y": 1080,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "a3558769a084d368",
        "type": "function",
        "z": "908ed317fb868fc9",
        "name": "get zones from db",
        "func": "const payload = msg.payload;\nconst options = payload.map((/** @type {{ name: any; id: any; }} */ item) => ({\n    [item.name]: item.id\n}));\nglobal.set(\"zonelist\", options)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 505,
        "y": 640,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "e63208153108a582",
        "type": "inject",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 1075,
        "y": 300,
        "wires": [
            [
                "afcdc071aa73ba3c"
            ]
        ],
        "l": false
    },
    {
        "id": "913577cc0543eb10",
        "type": "comment",
        "z": "908ed317fb868fc9",
        "g": "b40c92170361b3e6",
        "name": "get all  zones  from db",
        "info": "",
        "x": 690,
        "y": 280,
        "wires": []
    },
    {
        "id": "76f9f49b76b4a089",
        "type": "comment",
        "z": "908ed317fb868fc9",
        "g": "581c8cfed33deee4",
        "name": "add new zones  to db",
        "info": "",
        "x": 1090,
        "y": 620,
        "wires": []
    },
    {
        "id": "585bca1b872dc852",
        "type": "comment",
        "z": "908ed317fb868fc9",
        "g": "d6f130f36ad01f38",
        "name": "edit new zones  to db",
        "info": "",
        "x": 1070,
        "y": 960,
        "wires": []
    },
    {
        "id": "38c46b7f0335a288",
        "type": "function",
        "z": "69337b7ed7551a53",
        "g": "2b1282a1510a795e",
        "name": "get all  supervisors from db",
        "func": "var sql=flow.get(\"sql\");\nmsg.topic = sql.reqall;\nmsg.payload = {};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 140,
        "wires": [
            [
                "5d2b7410eb409ffe"
            ]
        ]
    },
    {
        "id": "64af30552a3ee07d",
        "type": "switch",
        "z": "69337b7ed7551a53",
        "name": "sql",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "sql.reqall",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.reqone",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.insone",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.updone",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.delone",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.addsup_zone",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.getsup_zone",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 7,
        "x": 395,
        "y": 680,
        "wires": [
            [
                "4e72142712e67141"
            ],
            [
                "acb97b7852280565"
            ],
            [
                "1d4bef3293395770"
            ],
            [
                "1d4bef3293395770"
            ],
            [
                "1d4bef3293395770"
            ],
            [
                "f482eadb91c313fb",
                "1d4bef3293395770"
            ],
            [
                "3bbe7d94e43efb3b"
            ]
        ],
        "l": false
    },
    {
        "id": "3cdb657141329c43",
        "type": "ui_button",
        "z": "69337b7ed7551a53",
        "g": "2b1282a1510a795e",
        "name": "",
        "group": "761e65757e8b511d",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "refresh data",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Supervisors_New_supervisor\",\"Supervisors_Edit_supervisor\",\"Supervisors_Assigning_to_Zones\"],\"show\":[\"Supervisors_supervisors\"],\"focus\":true}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 1070,
        "y": 260,
        "wires": [
            [
                "38c46b7f0335a288",
                "7b7bb5c295b10a92"
            ]
        ]
    },
    {
        "id": "f8181665a1ad3247",
        "type": "ui_button",
        "z": "69337b7ed7551a53",
        "g": "2b1282a1510a795e",
        "name": "",
        "group": "761e65757e8b511d",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "New",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Supervisors_supervisors\",\"Supervisors_Edit_supervisor\",\"Supervisors_Assuming_Zones\"],\"show\":[\"Supervisors_New_supervisor\"],\"focus\":true}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 1050,
        "y": 180,
        "wires": [
            [
                "7b7bb5c295b10a92"
            ]
        ]
    },
    {
        "id": "7b7bb5c295b10a92",
        "type": "ui_ui_control",
        "z": "69337b7ed7551a53",
        "g": "2b1282a1510a795e",
        "name": "",
        "events": "all",
        "x": 1255,
        "y": 220,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "aa48c3ccf0dcbde4",
        "type": "function",
        "z": "69337b7ed7551a53",
        "g": "2b1282a1510a795e",
        "name": "supervisors sql queries as object",
        "func": "",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\nvar queries = {\n    reqall: \"SELECT * FROM supervisors;\",\n    insone: \"INSERT INTO supervisors (name, position, mobile_number, landline,address ,email) VALUES (:name, :position, :mobile_number, :landline, :address,:email);\",\n    reqone: \"SELECT * FROM supervisors WHERE id = :id;\",\n    updone: \"UPDATE supervisors SET name = :name, position = :position, mobile_number = :mobile_number, landline = :landline,address = :address,email = :email WHERE id = :id;\",\n    delone: \"DELETE FROM supervisors WHERE id = :id;\",\n    delsup_zone:\"DELETE FROM supervisor_zones WHERE supervisor_id =  :id;\",\n    addsup_zone:\"INSERT INTO supervisor_zones (supervisor_id, zone_id) VALUES (:id, :zone_id);\",\n    getsup_zone: \"SELECT zones.id, zones.name FROM supervisor_zones JOIN zones ON supervisor_zones.zone_id = zones.id WHERE supervisor_zones.supervisor_id = :id;\"\n\n};\n\n// Save the variable in the Node-RED flow context\nflow.set('sql', queries);\n",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "92e0d283c21c79fd",
        "type": "ui_ui_control",
        "z": "69337b7ed7551a53",
        "g": "2b1282a1510a795e",
        "name": "",
        "events": "change",
        "x": 640,
        "y": 180,
        "wires": [
            [
                "1019f8cfbd383f25"
            ]
        ]
    },
    {
        "id": "1019f8cfbd383f25",
        "type": "switch",
        "z": "69337b7ed7551a53",
        "g": "2b1282a1510a795e",
        "name": "hide edit and new ",
        "property": "name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Supervisors",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 830,
        "y": 180,
        "wires": [
            [
                "3cdb657141329c43",
                "5fab13bce8d2846d"
            ]
        ]
    },
    {
        "id": "5de534d65887f31a",
        "type": "ui_toast",
        "z": "69337b7ed7551a53",
        "g": "0444508041cba798",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1190,
        "y": 1640,
        "wires": []
    },
    {
        "id": "9826c70141667dd9",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "0444508041cba798",
        "name": "Data Updated ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Data Updated ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 1620,
        "wires": [
            [
                "5de534d65887f31a"
            ]
        ]
    },
    {
        "id": "f482eadb91c313fb",
        "type": "switch",
        "z": "69337b7ed7551a53",
        "g": "0444508041cba798",
        "name": "",
        "property": "payload.affectedRows",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 785,
        "y": 1640,
        "wires": [
            [
                "9826c70141667dd9"
            ],
            [
                "aa846f2d9cefea74"
            ]
        ],
        "l": false
    },
    {
        "id": "aa846f2d9cefea74",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "0444508041cba798",
        "name": "error.message",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 1660,
        "wires": [
            [
                "5de534d65887f31a"
            ]
        ]
    },
    {
        "id": "4e72142712e67141",
        "type": "ui_table",
        "z": "69337b7ed7551a53",
        "g": "d3b7a3379d740eb8",
        "group": "98dd237644d75f15",
        "name": "supervisors",
        "order": 4,
        "width": "12",
        "height": "10",
        "columns": [
            {
                "field": "id",
                "title": "id",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "name",
                "title": "name",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "position",
                "title": "position",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "mobile_number",
                "title": "mobile",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "landline",
                "title": "landline",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "address",
                "title": "address",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "email",
                "title": "email",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 670,
        "y": 400,
        "wires": [
            [
                "1492e758208fea8f",
                "6c665f41990e6d9f",
                "699848b4419055e2"
            ]
        ]
    },
    {
        "id": "1492e758208fea8f",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "d3b7a3379d740eb8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Supervisors_New_supervisor\"],\"show\":[\"Supervisors_supervisors\",\"Supervisors_Edit_supervisor\",\"Supervisors_Assigning_to_Zones\"],\"focus\":true}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 805,
        "y": 360,
        "wires": [
            [
                "225a3e63285d5f6d"
            ]
        ],
        "l": false
    },
    {
        "id": "225a3e63285d5f6d",
        "type": "ui_ui_control",
        "z": "69337b7ed7551a53",
        "g": "d3b7a3379d740eb8",
        "name": "",
        "events": "all",
        "x": 855,
        "y": 360,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "6c665f41990e6d9f",
        "type": "function",
        "z": "69337b7ed7551a53",
        "g": "d3b7a3379d740eb8",
        "name": "get data for selected  supervisor from db",
        "func": "var sql = flow.get(\"sql\");\n\nvar id = msg.payload.id;\nmsg.topic = sql.reqone;\nmsg.payload = { id: id};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1200,
        "y": 460,
        "wires": [
            [
                "9da0d4704203183d"
            ]
        ]
    },
    {
        "id": "d80bc94b82a56f03",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "",
        "label": "address",
        "tooltip": "",
        "group": "ed82b542557def94",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 720,
        "y": 740,
        "wires": [
            [
                "b29f31959b122af3"
            ]
        ]
    },
    {
        "id": "b9ac1595d7a119f6",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "",
        "label": "name",
        "tooltip": "",
        "group": "ed82b542557def94",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 730,
        "y": 540,
        "wires": [
            [
                "897e229ca6088c8c"
            ]
        ]
    },
    {
        "id": "64832323b16b2833",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "",
        "label": "position",
        "tooltip": "",
        "group": "ed82b542557def94",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 720,
        "y": 580,
        "wires": [
            [
                "812bcfa47793e7d3"
            ]
        ]
    },
    {
        "id": "897e229ca6088c8c",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "name",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newsupervisor.name",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 815,
        "y": 540,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "812bcfa47793e7d3",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "latitude",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newsupervisor.position",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 815,
        "y": 580,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "244b5319bb2c04a5",
        "type": "ui_button",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "",
        "group": "ed82b542557def94",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "save",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "topic",
        "topicType": "msg",
        "x": 730,
        "y": 780,
        "wires": [
            [
                "e86e85fb3cdcf4d2",
                "ac28294dd1801a44"
            ]
        ]
    },
    {
        "id": "09965168a3698aeb",
        "type": "ui_button",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "",
        "group": "ed82b542557def94",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "close",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"supervisor_New_supervisor\",\"supervisor_Edit_supervisor\"],\"show\":[\"supervisor_supervisors\"],\"focus\":true}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 730,
        "y": 820,
        "wires": [
            [
                "766baa3ddc93bdc8"
            ]
        ]
    },
    {
        "id": "e86e85fb3cdcf4d2",
        "type": "function",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "INSERT new  supervisor to db",
        "func": "var sql = flow.get(\"sql\");\nvar newsupervisor = flow.get('newsupervisor');\nif(msg.payload===true){\n    msg.topic = sql.insone;\n\nmsg.payload = {\n    name: newsupervisor.name,\n    position: newsupervisor.position,\n    mobile_number: newsupervisor.mobile_number,\n    landline: newsupervisor.landline,\n    address: newsupervisor.address,\n    email: newsupervisor.email\n\n};\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1310,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "eb432369e33006dc",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "",
        "label": "landline",
        "tooltip": "",
        "group": "ed82b542557def94",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "tel",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 720,
        "y": 660,
        "wires": [
            [
                "41a22097fefecf28"
            ]
        ]
    },
    {
        "id": "41a22097fefecf28",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "radius",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newsupervisor.landline",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 815,
        "y": 660,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "b29f31959b122af3",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "radius",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newsupervisor.address",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 825,
        "y": 740,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "a3b7b1b181e75e14",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "",
        "label": "mobile_number",
        "tooltip": "",
        "group": "ed82b542557def94",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "tel",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 740,
        "y": 620,
        "wires": [
            [
                "29b897a7ed2b9918"
            ]
        ]
    },
    {
        "id": "29b897a7ed2b9918",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "longitude",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newsupervisor.mobile_number",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 875,
        "y": 620,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "ba0d8b25385d6812",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "radius",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "newsupervisor.email",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 805,
        "y": 700,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "96b60c9405283716",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "",
        "label": "email",
        "tooltip": "",
        "group": "ed82b542557def94",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "email",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 710,
        "y": 700,
        "wires": [
            [
                "ba0d8b25385d6812"
            ]
        ]
    },
    {
        "id": "71b091632bdb0084",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "",
        "label": "address",
        "tooltip": "",
        "group": "95c317683bf3504a",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 860,
        "y": 1080,
        "wires": [
            [
                "6ad96386bea8d6cc"
            ]
        ]
    },
    {
        "id": "6149585a77b8631a",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "",
        "label": "name",
        "tooltip": "",
        "group": "95c317683bf3504a",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 870,
        "y": 880,
        "wires": [
            [
                "a3f3247d5dd62746"
            ]
        ]
    },
    {
        "id": "0915a76bf1cb36fe",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "",
        "label": "position",
        "tooltip": "",
        "group": "95c317683bf3504a",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 860,
        "y": 920,
        "wires": [
            [
                "ad7668cbad9ed9bc"
            ]
        ]
    },
    {
        "id": "a3f3247d5dd62746",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "edit.name",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "edit.name",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 955,
        "y": 880,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "ad7668cbad9ed9bc",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "edit.position",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "edit.position",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 955,
        "y": 920,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "a1a7a7971063c0ae",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "",
        "label": "landline",
        "tooltip": "",
        "group": "95c317683bf3504a",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "tel",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 860,
        "y": 1000,
        "wires": [
            [
                "21cada401e7b04c5"
            ]
        ]
    },
    {
        "id": "21cada401e7b04c5",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "edit.landline",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "edit.landline",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 955,
        "y": 1000,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "6ad96386bea8d6cc",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "edit.address",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "edit.address",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 965,
        "y": 1080,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "429fee823bf8bee0",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "",
        "label": "mobile_number",
        "tooltip": "",
        "group": "95c317683bf3504a",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "tel",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 880,
        "y": 960,
        "wires": [
            [
                "c55658b973ef033f"
            ]
        ]
    },
    {
        "id": "6e0d9caaa31c6a43",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "edit.email",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "edit.email",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 945,
        "y": 1040,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "b370976ac92c8027",
        "type": "ui_text_input",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "",
        "label": "email",
        "tooltip": "",
        "group": "95c317683bf3504a",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "email",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 850,
        "y": 1040,
        "wires": [
            [
                "6e0d9caaa31c6a43"
            ]
        ]
    },
    {
        "id": "c55658b973ef033f",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "edit.mobile_number",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "edit.mobile_number",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1015,
        "y": 960,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "71f4c02b5cce008a",
        "type": "function",
        "z": "69337b7ed7551a53",
        "g": "519870bc95f0de5e",
        "name": "get zones from db",
        "func": "\nmsg.options = global.get(\"zonelist\");\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 685,
        "y": 1460,
        "wires": [
            [
                "d5bd9c10ae214427"
            ]
        ],
        "l": false
    },
    {
        "id": "74631c773897f2e0",
        "type": "ui_button",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "",
        "group": "95c317683bf3504a",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "save",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "topic",
        "topicType": "msg",
        "x": 710,
        "y": 1200,
        "wires": [
            [
                "22e9cff84990caf2"
            ]
        ]
    },
    {
        "id": "a2490faba7182059",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "payload[0].name",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].name",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 745,
        "y": 880,
        "wires": [
            [
                "6149585a77b8631a"
            ]
        ],
        "l": false
    },
    {
        "id": "f9db3a7d9b069af6",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "payload[0].mobile_number",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].mobile_number",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 745,
        "y": 960,
        "wires": [
            [
                "429fee823bf8bee0"
            ]
        ],
        "l": false
    },
    {
        "id": "2c4688783acec574",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "payload[0].position",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].position",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 745,
        "y": 920,
        "wires": [
            [
                "0915a76bf1cb36fe"
            ]
        ],
        "l": false
    },
    {
        "id": "22e9cff84990caf2",
        "type": "function",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "UPDATE supervisor",
        "func": "var edit = flow.get('edit');\nvar sql = flow.get(\"sql\");\n\nif(msg.payload===true){\nmsg.topic = sql.updone;\nmsg.payload = {\n    id: edit.id,\n  name: edit.name,\n  position: edit.position,\n  mobile_number: edit.mobile_number,\n  landline: edit.landline,\n  address: edit.address,\n  email: edit.email\n\n  };\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 1200,
        "wires": [
            [
                "0e800deb4da15ebf"
            ]
        ]
    },
    {
        "id": "2e1f37c2501b0845",
        "type": "ui_button",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "",
        "group": "95c317683bf3504a",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "close",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"supervisor_New_supervisor\",\"supervisor_Edit_supervisor\"],\"show\":[\"supervisor_supervisors\"],\"focus\":true}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 710,
        "y": 1160,
        "wires": [
            [
                "83929613cce69079"
            ]
        ]
    },
    {
        "id": "aa5113b6e33253ca",
        "type": "function",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "DELETE supervisor",
        "func": "var edit = flow.get('edit');\nvar sql = flow.get(\"sql\");\n\nif (msg.payload === \"Delete\"){\n  \n    msg.topic = sql.delone;\nmsg.payload = {\n  id: edit.id\n};\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1310,
        "y": 1260,
        "wires": [
            [
                "0e800deb4da15ebf"
            ]
        ]
    },
    {
        "id": "9be0f49637bcc95a",
        "type": "ui_button",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "",
        "group": "95c317683bf3504a",
        "order": 9,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "DELETE ",
        "tooltip": "",
        "color": "red",
        "bgcolor": "",
        "className": "",
        "icon": "fa-trash",
        "payload": "are you sure ?",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 720,
        "y": 1260,
        "wires": [
            [
                "c597d5a198c04031"
            ]
        ]
    },
    {
        "id": "c597d5a198c04031",
        "type": "ui_toast",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "Delete",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "are you sure ?",
        "x": 960,
        "y": 1260,
        "wires": [
            [
                "53dc2991d50e6642",
                "26c044b4a8cc4602"
            ]
        ]
    },
    {
        "id": "3651aabdd4240713",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "payload[0].landline",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].landline",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 745,
        "y": 1000,
        "wires": [
            [
                "a1a7a7971063c0ae"
            ]
        ],
        "l": false
    },
    {
        "id": "ffe7288090f2fded",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "payload[0].id",
        "rules": [
            {
                "t": "set",
                "p": "edit.id",
                "pt": "flow",
                "to": "payload[0].id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 755,
        "y": 1120,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "bb84f18d00b7ff74",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "payload[0].email",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].email",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 745,
        "y": 1040,
        "wires": [
            [
                "b370976ac92c8027"
            ]
        ],
        "l": false
    },
    {
        "id": "d1a768a4049a0391",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "payload[0].address",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].address",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 755,
        "y": 1080,
        "wires": [
            [
                "71b091632bdb0084"
            ]
        ],
        "l": false
    },
    {
        "id": "26c044b4a8cc4602",
        "type": "function",
        "z": "69337b7ed7551a53",
        "g": "519870bc95f0de5e",
        "name": "DELETE  Assigning supervisors to zones",
        "func": "var edit = flow.get('edit');\nvar sql = flow.get(\"sql\");\n\n  msg.topic = sql.delsup_zone;\nmsg.payload = {id: edit.id}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 1400,
        "wires": [
            [
                "9fc31f14e9ceee85"
            ]
        ]
    },
    {
        "id": "bd4ee6c317a243a8",
        "type": "function",
        "z": "69337b7ed7551a53",
        "g": "519870bc95f0de5e",
        "name": "Assigning supervisors to zones",
        "func": "var edit = flow.get('edit');\nvar sql = flow.get(\"sql\");\nvar zone_id_array = edit.zone;\nvar messegs = [];\n\n\nzone_id_array.forEach(function (item) {\n  var zone_id = item ;\n  var msg1 = { payload: { id: edit.id, zone_id: zone_id }, topic: sql.addsup_zone}\n  messegs.push(msg1);\n\n});\n\nreturn [messegs];\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 1440,
        "wires": [
            [
                "9fc31f14e9ceee85"
            ]
        ]
    },
    {
        "id": "c20e9e50b33f2388",
        "type": "delay",
        "z": "69337b7ed7551a53",
        "g": "519870bc95f0de5e",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1020,
        "y": 1440,
        "wires": [
            [
                "bd4ee6c317a243a8"
            ]
        ]
    },
    {
        "id": "d1faf7c989bfe2b8",
        "type": "ui_button",
        "z": "69337b7ed7551a53",
        "g": "519870bc95f0de5e",
        "name": "",
        "group": "98cc52cc11bb5354",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Assigning",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "topic",
        "topicType": "msg",
        "x": 760,
        "y": 1400,
        "wires": [
            [
                "26c044b4a8cc4602",
                "c20e9e50b33f2388"
            ]
        ]
    },
    {
        "id": "d5bd9c10ae214427",
        "type": "ui_dropdown",
        "z": "69337b7ed7551a53",
        "g": "519870bc95f0de5e",
        "name": "",
        "label": "zone",
        "tooltip": "",
        "place": "Select option",
        "group": "98cc52cc11bb5354",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": true,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 780,
        "y": 1460,
        "wires": [
            [
                "42552884d437b684"
            ]
        ]
    },
    {
        "id": "42552884d437b684",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "519870bc95f0de5e",
        "name": "edit.address",
        "rules": [
            {
                "t": "set",
                "p": "edit.zone",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 905,
        "y": 1460,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "3bbe7d94e43efb3b",
        "type": "ui_table",
        "z": "69337b7ed7551a53",
        "g": "519870bc95f0de5e",
        "group": "98cc52cc11bb5354",
        "name": "zones",
        "order": 1,
        "width": "4",
        "height": "1",
        "columns": [
            {
                "field": "id",
                "title": "Zone ID",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "name",
                "title": "name",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 790,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "699848b4419055e2",
        "type": "function",
        "z": "69337b7ed7551a53",
        "g": "d3b7a3379d740eb8",
        "name": "To fetch the assigned  zone  for a specific supervisors ",
        "func": "var sql = flow.get(\"sql\");\n\nvar id = msg.payload.id;\nmsg.topic = sql.getsup_zone;\nmsg.payload = { id: id};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1200,
        "y": 400,
        "wires": [
            [
                "9da0d4704203183d"
            ]
        ]
    },
    {
        "id": "f1c5bc34d0fdb793",
        "type": "link in",
        "z": "69337b7ed7551a53",
        "g": "2b1282a1510a795e",
        "name": "refresh data",
        "links": [
            "766baa3ddc93bdc8",
            "83929613cce69079"
        ],
        "x": 885,
        "y": 240,
        "wires": [
            [
                "3cdb657141329c43"
            ]
        ]
    },
    {
        "id": "766baa3ddc93bdc8",
        "type": "link out",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "close",
        "mode": "link",
        "links": [
            "f1c5bc34d0fdb793"
        ],
        "x": 855,
        "y": 820,
        "wires": []
    },
    {
        "id": "83929613cce69079",
        "type": "link out",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "close",
        "mode": "link",
        "links": [
            "f1c5bc34d0fdb793"
        ],
        "x": 915,
        "y": 1160,
        "wires": []
    },
    {
        "id": "53dc2991d50e6642",
        "type": "delay",
        "z": "69337b7ed7551a53",
        "g": "853dc2a82496e612",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1140,
        "y": 1260,
        "wires": [
            [
                "aa5113b6e33253ca"
            ]
        ]
    },
    {
        "id": "91f880c3c9c46409",
        "type": "ui_button",
        "z": "69337b7ed7551a53",
        "g": "519870bc95f0de5e",
        "name": "",
        "group": "98cc52cc11bb5354",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "Delete Assigning",
        "tooltip": "",
        "color": "red",
        "bgcolor": "",
        "className": "",
        "icon": "fa-trash",
        "payload": "are you sure ?",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 790,
        "y": 1360,
        "wires": [
            [
                "c654c95aea828ed2"
            ]
        ]
    },
    {
        "id": "f59755a5a01a7127",
        "type": "change",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "",
        "rules": [
            {
                "t": "delete",
                "p": "newsupervisor",
                "pt": "flow"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 615,
        "y": 640,
        "wires": [
            [
                "b9ac1595d7a119f6",
                "64832323b16b2833",
                "a3b7b1b181e75e14",
                "eb432369e33006dc",
                "96b60c9405283716",
                "d80bc94b82a56f03"
            ]
        ],
        "l": false
    },
    {
        "id": "ac28294dd1801a44",
        "type": "delay",
        "z": "69337b7ed7551a53",
        "g": "c9315be32749249c",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 575,
        "y": 640,
        "wires": [
            [
                "f59755a5a01a7127"
            ]
        ],
        "l": false
    },
    {
        "id": "c654c95aea828ed2",
        "type": "ui_toast",
        "z": "69337b7ed7551a53",
        "g": "519870bc95f0de5e",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "Rest Assuming",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "are you sure ?",
        "x": 1020,
        "y": 1360,
        "wires": [
            [
                "26c044b4a8cc4602"
            ]
        ]
    },
    {
        "id": "5fab13bce8d2846d",
        "type": "link out",
        "z": "69337b7ed7551a53",
        "g": "2b1282a1510a795e",
        "name": "get zone",
        "mode": "link",
        "links": [
            "ea22fdc69aaddfcd"
        ],
        "x": 1055,
        "y": 100,
        "wires": []
    },
    {
        "id": "ea22fdc69aaddfcd",
        "type": "link in",
        "z": "69337b7ed7551a53",
        "g": "519870bc95f0de5e",
        "name": "get zone",
        "links": [
            "5fab13bce8d2846d"
        ],
        "x": 605,
        "y": 1460,
        "wires": [
            [
                "71f4c02b5cce008a"
            ]
        ]
    },
    {
        "id": "feb1f8a2fcb8fc90",
        "type": "function",
        "z": "8324692507d46007",
        "name": "get all  Hotspots from db",
        "func": "var sql=flow.get(\"sql\");\nmsg.topic = sql.reqall;\nmsg.payload = {};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1210,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "72a67cb84b03ac8c",
        "type": "switch",
        "z": "8324692507d46007",
        "name": "sql",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "sql.reqall",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 455,
        "y": 440,
        "wires": [
            [
                "ad70a2dfc5efe4bf"
            ]
        ],
        "l": false
    },
    {
        "id": "5b44e8fa9daaa491",
        "type": "ui_button",
        "z": "8324692507d46007",
        "name": "",
        "group": "d8e23e91d6775bae",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "refresh data",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "topic",
        "topicType": "msg",
        "x": 970,
        "y": 300,
        "wires": [
            [
                "feb1f8a2fcb8fc90"
            ]
        ]
    },
    {
        "id": "8f3920e209dfc5a3",
        "type": "function",
        "z": "8324692507d46007",
        "name": "Hotspots SQL query  as object",
        "func": "",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\nvar queries = {\n    reqall: \"SELECT * FROM hotspots;\",\n    reqone: \"SELECT * FROM hotspots WHERE name LIKE :name;\",\n    dellall: \"Delete  FROM hotspots;\"\n};\n\n// Save the variable in the Node-RED flow context\nflow.set('sql', queries);\nflow.set('newnode');\n",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "744c17969f8e67f5",
        "type": "ui_ui_control",
        "z": "8324692507d46007",
        "name": "",
        "events": "change",
        "x": 600,
        "y": 300,
        "wires": [
            [
                "1b4746df0cb89063"
            ]
        ]
    },
    {
        "id": "1b4746df0cb89063",
        "type": "switch",
        "z": "8324692507d46007",
        "name": "hide edit and new ",
        "property": "name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Hotspots",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 790,
        "y": 300,
        "wires": [
            [
                "5b44e8fa9daaa491"
            ]
        ]
    },
    {
        "id": "ad70a2dfc5efe4bf",
        "type": "ui_table",
        "z": "8324692507d46007",
        "g": "08b43b39be3bcfd4",
        "group": "0e6dd110e1df80b8",
        "name": "Hotspots",
        "order": 2,
        "width": "14",
        "height": "10",
        "columns": [
            {
                "field": "No.",
                "title": "No.",
                "width": "",
                "align": "left",
                "formatter": "rownum",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "name",
                "title": "name",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "latitude",
                "title": "latitude",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "longitude",
                "title": "longitude",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 620,
        "y": 420,
        "wires": [
            [
                "3484b220ac82a5a9",
                "91a340f8ed30b83a"
            ]
        ]
    },
    {
        "id": "3484b220ac82a5a9",
        "type": "change",
        "z": "8324692507d46007",
        "g": "08b43b39be3bcfd4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "msg.payload.name",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 935,
        "y": 480,
        "wires": [
            [
                "e445973ea3e4d3a0"
            ]
        ],
        "l": false
    },
    {
        "id": "91a340f8ed30b83a",
        "type": "function",
        "z": "8324692507d46007",
        "g": "08b43b39be3bcfd4",
        "name": "Points",
        "func": "\n var      lat= parseFloat(msg.payload.latitude);\n var             lon=msg.payload.longitude;\n var                name= msg.payload.name;\n\n\nmsg.payload = {\n      lat: parseFloat(lat) ,\n    lon: parseFloat(lon),\n    name:name,\n    icon: \"fa-wifi\",\n    color: \"#000\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 825,
        "y": 420,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "e445973ea3e4d3a0",
        "type": "function",
        "z": "8324692507d46007",
        "g": "08b43b39be3bcfd4",
        "name": "get data for selected  Hotspot from db",
        "func": "var sql = flow.get(\"sql\");\n\nvar name = msg.payload;\nmsg.topic = sql.reqone;\nmsg.payload = { name: name};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "8050f143041f3ef7",
        "type": "ui_button",
        "z": "8324692507d46007",
        "name": "",
        "group": "d8e23e91d6775bae",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "Delete",
        "tooltip": "",
        "color": "red",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Are you Sure",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 850,
        "y": 620,
        "wires": [
            [
                "971317bfda3c55b1"
            ]
        ]
    },
    {
        "id": "c2e26a016ce64040",
        "type": "function",
        "z": "8324692507d46007",
        "name": "delete all  Hotspots from db",
        "func": "\nvar sql = flow.get(\"sql\");\n\nif (msg.payload === \"Delete\") {\n\n    msg.topic = sql.dellall;\n    msg.payload = {\n     \n    };\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "971317bfda3c55b1",
        "type": "ui_toast",
        "z": "8324692507d46007",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "Delete",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "are you sure ?",
        "x": 1040,
        "y": 620,
        "wires": [
            [
                "c2e26a016ce64040"
            ]
        ]
    },
    {
        "id": "ab292d73c013b32d",
        "type": "function",
        "z": "77609808ed89764b",
        "name": "node sql queries as object",
        "func": "",
        "outputs": 1,
        "noerr": 0,
        "initialize": "\n\nvar queries = {\n    reqlastmesseges: \"SELECT fd.*, fn.name, fn.latitude, fn.longitude FROM fire_detection_regular_messages fd INNER JOIN fire_nodes fn ON fd.dev_eui = fn.dev_eui INNER JOIN (SELECT fdm.dev_eui, MAX(datetime) AS max_datetime FROM fire_detection_regular_messages fdm INNER JOIN fire_nodes fn ON fdm.dev_eui = fn.dev_eui WHERE fn.zone_id = :zone_id GROUP BY fdm.dev_eui) grouped_fdm ON fd.dev_eui = grouped_fdm.dev_eui AND fd.datetime = grouped_fdm.max_datetime;\",\n    activenode: \"SELECT (SUM(CASE WHEN status = 1 THEN 1 ELSE 0 END) * 100.0 / COUNT(*)) AS true_percentage FROM fire_nodes;\",\n\n};\n\n// Save the variable in the Node-RED flow context\nflow.set('sql', queries);\nflow.set('newnode');\n",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "579a4b86bce496fe",
        "type": "ui_gauge",
        "z": "77609808ed89764b",
        "name": "",
        "group": "27662f8227012deb",
        "order": 2,
        "width": 2,
        "height": 1,
        "gtype": "donut",
        "title": "Active Nodes %",
        "label": "",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#b30000",
            "#e6e600",
            "#59cb3a"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 620,
        "y": 380,
        "wires": []
    },
    {
        "id": "5e9dec71a49ddf7e",
        "type": "ui_text_input",
        "z": "77609808ed89764b",
        "name": "",
        "label": "",
        "tooltip": "",
        "group": "27662f8227012deb",
        "order": 1,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 820,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "5ace9956eb668982",
        "type": "inject",
        "z": "77609808ed89764b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 430,
        "y": 20,
        "wires": [
            [
                "2c4144b6f2603b70"
            ]
        ]
    },
    {
        "id": "2c4144b6f2603b70",
        "type": "function",
        "z": "77609808ed89764b",
        "name": "Date and time",
        "func": "// Get the current date and time\nconst now = new Date();\n\n\n// Format the date and time\nconst date = now.toLocaleDateString('de-DE');\nconst time = now.toLocaleTimeString('de-DE');\n\n// Create the payload to send to the widget as a single string\nmsg.payload = `${date}, ${time}`;\n\n// Return the message object\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 20,
        "wires": [
            [
                "5e9dec71a49ddf7e"
            ]
        ]
    },
    {
        "id": "55bf78eed0973239",
        "type": "switch",
        "z": "77609808ed89764b",
        "name": "sql",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "sql.getzones",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.activenode",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "sql.reqlastmesseges",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "queries.sos_super",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "queries.fire_super",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 85,
        "y": 360,
        "wires": [
            [],
            [
                "c1de64b224c87d09"
            ],
            [
                "a19aecb9c9eca646",
                "47ac1a48ea50efaa"
            ],
            [
                "8c2b41190ba91b15",
                "898f35ee14425270"
            ],
            [
                "5788a48e27dc37bb",
                "c1b0bcd1d8ac25d3"
            ]
        ],
        "l": false
    },
    {
        "id": "df7dc5546a43ddde",
        "type": "function",
        "z": "77609808ed89764b",
        "name": "To get the percentage of nodes with `status` true",
        "func": "var sql = flow.get(\"sql\");\n\nvar dev_eui = msg.payload;\nmsg.topic = sql.activenode;\nmsg.payload = { dev_eui: dev_eui};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "c1de64b224c87d09",
        "type": "function",
        "z": "77609808ed89764b",
        "name": "convet to int",
        "func": "// Get the true_percentage value from the payload\nconst truePercentage = msg.payload[0].true_percentage;\n\n// Convert the true_percentage value to an integer\nconst truePercentageInt = Math.round(truePercentage);\n\n// Update the payload with the integer value\nmsg.payload = truePercentageInt;\n\n// Return the message object\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 380,
        "wires": [
            [
                "579a4b86bce496fe"
            ]
        ]
    },
    {
        "id": "1f68cd7a29679431",
        "type": "inject",
        "z": "77609808ed89764b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 865,
        "y": 780,
        "wires": [
            [
                "df7dc5546a43ddde"
            ]
        ],
        "l": false
    },
    {
        "id": "9b3905fa9708c589",
        "type": "ui_dropdown",
        "z": "77609808ed89764b",
        "name": "",
        "label": "zone",
        "tooltip": "",
        "place": "Select option",
        "group": "27662f8227012deb",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1250,
        "y": 620,
        "wires": [
            [
                "5bbc70453a4ace73"
            ]
        ]
    },
    {
        "id": "dc9fd412af228c49",
        "type": "function",
        "z": "77609808ed89764b",
        "name": "get zones from db",
        "func": "\nmsg.options = global.get(\"zonelist\");\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1105,
        "y": 660,
        "wires": [
            [
                "9b3905fa9708c589"
            ]
        ],
        "l": false
    },
    {
        "id": "070ec2d3b7803635",
        "type": "ui_ui_control",
        "z": "77609808ed89764b",
        "name": "",
        "events": "change",
        "x": 940,
        "y": 660,
        "wires": [
            [
                "a96a0d7bde72b85c"
            ]
        ]
    },
    {
        "id": "a96a0d7bde72b85c",
        "type": "switch",
        "z": "77609808ed89764b",
        "name": "hide edit and new ",
        "property": "name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Dashboard",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1035,
        "y": 660,
        "wires": [
            [
                "dc9fd412af228c49"
            ]
        ],
        "l": false
    },
    {
        "id": "a19aecb9c9eca646",
        "type": "function",
        "z": "77609808ed89764b",
        "name": "convert datetime string to German format",
        "func": "// Function to convert datetime string to German format\nfunction formatDateToGerman(datetime) {\n    const options = { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit', timeZone: 'Europe/Berlin' };\n    return new Intl.DateTimeFormat('de-DE', options).format(datetime);\n}\n\n// Process the payload\nif (Array.isArray(msg.payload)) {\n    msg.payload.forEach((item, index) => {\n        const datetimeString = item.datetime;\n        const datetime = new Date(datetimeString);\n        msg.payload[index].germanDatetime = formatDateToGerman(datetime);\n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 815,
        "y": 220,
        "wires": [
            [
                "0648bd9b3aefd388"
            ]
        ],
        "l": false
    },
    {
        "id": "0648bd9b3aefd388",
        "type": "ui_table",
        "z": "77609808ed89764b",
        "group": "27662f8227012deb",
        "name": "",
        "order": 6,
        "width": 14,
        "height": "2",
        "columns": [
            {
                "field": "id",
                "title": "id",
                "width": "30",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "name",
                "title": "Name",
                "width": "70",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "latitude",
                "title": "Latitude",
                "width": "70",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "longitude",
                "title": "Longitude",
                "width": "70",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "germanDatetime",
                "title": "Date Time",
                "width": "140",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "temperature",
                "title": "°C",
                "width": "50",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "humidity",
                "title": "humidity",
                "width": "50",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "barometer",
                "title": "barometer",
                "width": "50",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "air_resistance",
                "title": "AirOhm",
                "width": "70",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "battery",
                "title": "🔋",
                "width": "50",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "fire_status",
                "title": "🔥",
                "width": "40",
                "align": "left",
                "formatter": "tickCross",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 1070,
        "y": 300,
        "wires": [
            [
                "ac549cba16597b0b",
                "24afef5d520ede7a"
            ]
        ]
    },
    {
        "id": "5bbc70453a4ace73",
        "type": "function",
        "z": "77609808ed89764b",
        "name": " get the last message from every node with a specific `zone_id`:",
        "func": "var sql = flow.get(\"sql\");\n\nvar  zone_id = msg.payload;\nmsg.topic = sql.reqlastmesseges;\nmsg.payload = { zone_id: zone_id};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1355,
        "y": 620,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "ac549cba16597b0b",
        "type": "function",
        "z": "77609808ed89764b",
        "name": "Points",
        "func": "var dev_eui= msg.payload.dev_eui;\n var      lat= parseFloat(msg.payload.latitude);\n var             lon=msg.payload.longitude;\n var                name= msg.payload.name;\n\n\nmsg.payload = {\n    dev_eui: dev_eui,\n    lat: parseFloat(lat) ,\n    lon: parseFloat(lon),\n    name:name,\n    icon: \"fa-tree\",\n    color: \"#000\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1305,
        "y": 260,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "47ac1a48ea50efaa",
        "type": "split",
        "z": "77609808ed89764b",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 770,
        "y": 140,
        "wires": [
            [
                "ac549cba16597b0b"
            ]
        ]
    },
    {
        "id": "a0fb8e761dbe313d",
        "type": "ui_gauge",
        "z": "77609808ed89764b",
        "g": "2adebf06be054e3b",
        "name": "",
        "group": "dashboard_group",
        "order": 2,
        "width": 2,
        "height": 2,
        "gtype": "donut",
        "title": "temperature",
        "label": "C°",
        "format": "{{payload.temperature}}",
        "min": "-15",
        "max": "50",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1710,
        "y": 440,
        "wires": []
    },
    {
        "id": "3637c477d8c51c95",
        "type": "ui_gauge",
        "z": "77609808ed89764b",
        "g": "2adebf06be054e3b",
        "name": "",
        "group": "dashboard_group",
        "order": 3,
        "width": 2,
        "height": 2,
        "gtype": "wave",
        "title": "humidity",
        "label": "%",
        "format": "{{payload.humidity}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1720,
        "y": 500,
        "wires": []
    },
    {
        "id": "9589cfc85d5efcaf",
        "type": "ui_gauge",
        "z": "77609808ed89764b",
        "g": "2adebf06be054e3b",
        "name": "",
        "group": "dashboard_group",
        "order": 7,
        "width": 2,
        "height": 2,
        "gtype": "donut",
        "title": "🔋",
        "label": "🔋",
        "format": "{{payload.battery}}",
        "min": "1",
        "max": "100",
        "colors": [
            "#b30000",
            "#e6e600",
            "#3acb3c"
        ],
        "seg1": "30",
        "seg2": "60",
        "className": "",
        "x": 1690,
        "y": 320,
        "wires": []
    },
    {
        "id": "e21993c1ef3700c9",
        "type": "link in",
        "z": "77609808ed89764b",
        "g": "2adebf06be054e3b",
        "name": "Points",
        "links": [
            "24afef5d520ede7a"
        ],
        "x": 1485,
        "y": 420,
        "wires": [
            [
                "83530bcb8d42f1b9",
                "3637c477d8c51c95",
                "a0fb8e761dbe313d",
                "9589cfc85d5efcaf",
                "f6c2e04248a463e1",
                "0f8150715624471d",
                "374cb5fd4ee047bd"
            ]
        ]
    },
    {
        "id": "83530bcb8d42f1b9",
        "type": "ui_button",
        "z": "77609808ed89764b",
        "g": "2adebf06be054e3b",
        "name": "node name",
        "group": "dashboard_group",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "{{payload .name}}",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1730,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "0f8150715624471d",
        "type": "ui_gauge",
        "z": "77609808ed89764b",
        "g": "2adebf06be054e3b",
        "name": "",
        "group": "dashboard_group",
        "order": 5,
        "width": 2,
        "height": 2,
        "gtype": "donut",
        "title": "air resistance",
        "label": "KΩ",
        "format": "{{payload.air_resistance}}",
        "min": 0,
        "max": "105",
        "colors": [
            "#ff0000",
            "#ffde05",
            "#3acb4a"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1730,
        "y": 580,
        "wires": []
    },
    {
        "id": "f6c2e04248a463e1",
        "type": "ui_gauge",
        "z": "77609808ed89764b",
        "g": "2adebf06be054e3b",
        "name": "",
        "group": "dashboard_group",
        "order": 4,
        "width": 2,
        "height": 2,
        "gtype": "donut",
        "title": "barometer",
        "label": "Pa",
        "format": "{{payload.barometer}}",
        "min": 0,
        "max": "1000",
        "colors": [
            "#00b500",
            "#e6e600",
            "#0008fa"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1710,
        "y": 540,
        "wires": []
    },
    {
        "id": "374cb5fd4ee047bd",
        "type": "ui_gauge",
        "z": "77609808ed89764b",
        "g": "2adebf06be054e3b",
        "name": "",
        "group": "dashboard_group",
        "order": 6,
        "width": 2,
        "height": 2,
        "gtype": "donut",
        "title": "🔥",
        "label": "🔥",
        "format": "{{payload.fire_status}}",
        "min": 0,
        "max": "1",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1710,
        "y": 360,
        "wires": []
    },
    {
        "id": "24afef5d520ede7a",
        "type": "link out",
        "z": "77609808ed89764b",
        "name": "Points",
        "mode": "link",
        "links": [
            "e21993c1ef3700c9"
        ],
        "x": 1335,
        "y": 340,
        "wires": []
    },
    {
        "id": "5358640b034be96e",
        "type": "ui_gauge",
        "z": "77609808ed89764b",
        "name": "SoS",
        "group": "dashboard_group",
        "order": 8,
        "width": 3,
        "height": 4,
        "gtype": "donut",
        "title": "",
        "label": "",
        "format": "{{payload}}",
        "min": 0,
        "max": "1",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1130,
        "y": 860,
        "wires": []
    },
    {
        "id": "8dcc88aacc85aa0c",
        "type": "ui_button",
        "z": "77609808ed89764b",
        "name": "",
        "group": "dashboard_group",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Rest SoS",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "0",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 800,
        "y": 940,
        "wires": [
            [
                "5358640b034be96e"
            ]
        ]
    },
    {
        "id": "e7ebbb9de9f2df1a",
        "type": "ui_gauge",
        "z": "77609808ed89764b",
        "name": "fire",
        "group": "dashboard_group",
        "order": 9,
        "width": 3,
        "height": 4,
        "gtype": "donut",
        "title": "",
        "label": "🔥",
        "format": "{{payload.fire_status}}",
        "min": 0,
        "max": "1",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1130,
        "y": 820,
        "wires": []
    },
    {
        "id": "a179fadf6a92ec5c",
        "type": "ui_button",
        "z": "77609808ed89764b",
        "name": "",
        "group": "dashboard_group",
        "order": 11,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Rest Fire",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "0",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 800,
        "y": 860,
        "wires": [
            [
                "e7ebbb9de9f2df1a"
            ]
        ]
    },
    {
        "id": "914cd0925c76a014",
        "type": "inject",
        "z": "77609808ed89764b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 970,
        "y": 600,
        "wires": [
            [
                "9b3905fa9708c589"
            ]
        ]
    },
    {
        "id": "8c2b41190ba91b15",
        "type": "function",
        "z": "77609808ed89764b",
        "name": "SoS points ",
        "func": "var zone = msg.payload.zone_name;\nvar lat = parseFloat (msg.payload.node_latitude);\nvar lon = parseFloat(msg.payload.node_longitude);\nvar name = msg.payload.node_name;\n\n\n\nmsg.payload = {\n    zone: zone,\n    lat: lat ,\n    lon: lon,\n    name:name,\n    icon: \"fa-male\",\n    color: \"#000\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 685,
        "y": 660,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "5788a48e27dc37bb",
        "type": "change",
        "z": "77609808ed89764b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 820,
        "wires": [
            [
                "e7ebbb9de9f2df1a"
            ]
        ]
    },
    {
        "id": "898f35ee14425270",
        "type": "change",
        "z": "77609808ed89764b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 900,
        "wires": [
            [
                "5358640b034be96e"
            ]
        ]
    },
    {
        "id": "c1b0bcd1d8ac25d3",
        "type": "function",
        "z": "77609808ed89764b",
        "name": "Fire points ",
        "func": "var zone = msg.payload.fire_zone_name;\nvar lat = parseFloat (msg.payload.node_latitude);\nvar lon = parseFloat(msg.payload.node_longitude);\nvar name = msg.payload.node_name;\n\n\n\nmsg.payload = {\n    zone: zone,\n    lat: lat ,\n    lon: lon,\n    name:name,\n    icon: \"fa-fire\",\n    color: \"#000\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 825,
        "y": 440,
        "wires": [
            [
                "0648bd9b3aefd388"
            ]
        ],
        "l": false
    },
    {
        "id": "78316bdc2a86bcdf",
        "type": "ui_button",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "",
        "group": "eb73b8d7619e7978",
        "order": 1,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Get Messages",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 600,
        "y": 400,
        "wires": [
            [
                "81bcf1ba3e8b9088"
            ]
        ]
    },
    {
        "id": "674483ed0359fa45",
        "type": "function",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "node sql queries as object",
        "func": "",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\nvar queries = {\n   reqbydate: \"SELECT fd.id, fd.datetime, fd.dev_eui, fd.hotspot_name, fd.port, fd.temperature, fd.humidity, fd.barometer, fd.air_resistance, fd.fire_status, fd.fire_validated, fd.battery, fd.spreading_factor, fd.snr, fd.rssi, fn.name AS node_name, fn.latitude AS node_latitude, fn.longitude AS node_longitude, hs.latitude AS hotspot_latitude, hs.longitude AS hotspot_longitude, s.name AS supervisor_name, s.mobile_number, z.name AS zone_name FROM fire_detection_regular_messages AS fd JOIN fire_nodes AS fn ON fd.dev_eui = fn.dev_eui JOIN hotspots AS hs ON fd.hotspot_name = hs.name JOIN supervisor_zones AS sz ON fn.zone_id = sz.zone_id JOIN supervisors AS s ON sz.supervisor_id = s.id JOIN zones AS z ON fn.zone_id = z.id WHERE fd.datetime BETWEEN :start AND :end AND z.id = :zone_id  ORDER BY fd.datetime DESC; \",\n};\n\n// Save the variable in the Node-RED flow context\nflow.set('sql', queries);\nflow.set('datefilter');\n",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "f7d07492dbc0b0a0",
        "type": "switch",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "sql.reqbydate",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "sql.reqbydate",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 475,
        "y": 320,
        "wires": [
            [
                "b6602cb23f5879f2"
            ]
        ],
        "l": false
    },
    {
        "id": "b6602cb23f5879f2",
        "type": "function",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "convert datetime string to German format",
        "func": "// Function to convert datetime string to German format\nfunction formatDateToGerman(datetime) {\n    const options = { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit', timeZone: 'Europe/Berlin' };\n    return new Intl.DateTimeFormat('de-DE', options).format(datetime);\n}\n\n// Process the payload\nif (Array.isArray(msg.payload)) {\n    msg.payload.forEach((item, index) => {\n        const datetimeString = item.datetime;\n        const datetime = new Date(datetimeString);\n        msg.payload[index].germanDatetime = formatDateToGerman(datetime);\n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 625,
        "y": 320,
        "wires": [
            [
                "e68481f611e403fb",
                "e423f6629dc6cafe"
            ]
        ],
        "l": false
    },
    {
        "id": "e68481f611e403fb",
        "type": "ui_table",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "group": "f21069c4277baefc",
        "name": "",
        "order": 2,
        "width": "23",
        "height": "17",
        "columns": [
            {
                "field": "No.",
                "title": "",
                "width": "",
                "align": "left",
                "formatter": "rownum",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "id",
                "title": "id",
                "width": "30",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "node_name",
                "title": "Name",
                "width": "80",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "node_latitude",
                "title": "Latitude",
                "width": "80",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "node_longitude",
                "title": "Longitude",
                "width": "80",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "hotspot_name",
                "title": "Hotspot",
                "width": "130",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "germanDatetime",
                "title": "Date Time",
                "width": "170",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "temperature",
                "title": "°C",
                "width": "50",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "humidity",
                "title": "humidity",
                "width": "50",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "barometer",
                "title": "barometer",
                "width": "70",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "air_resistance",
                "title": "AirOhm",
                "width": "70",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "battery",
                "title": "🔋",
                "width": "50",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "fire_status",
                "title": "🔥",
                "width": "50",
                "align": "left",
                "formatter": "tickCross",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "spreading_factor",
                "title": "SF",
                "width": "80",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "zone_name",
                "title": "Zone",
                "width": "80",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "supervisor_name",
                "title": "supervisor",
                "width": "170",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 1010,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "14e8710f5e014474",
        "type": "function",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "get zones from db",
        "func": "\nmsg.options = global.get(\"zonelist\");\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 895,
        "y": 220,
        "wires": [
            [
                "95334f692491fd46"
            ]
        ],
        "l": false
    },
    {
        "id": "95334f692491fd46",
        "type": "ui_dropdown",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "",
        "label": "zone",
        "tooltip": "",
        "place": "Select option",
        "group": "6af3aa72e0f4a854",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1000,
        "y": 220,
        "wires": [
            [
                "8bfa17c5634523ea"
            ]
        ]
    },
    {
        "id": "8bfa17c5634523ea",
        "type": "change",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "zone_id",
        "rules": [
            {
                "t": "set",
                "p": "datefilter.zone",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1085,
        "y": 220,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "5e31fc4740ac2f7e",
        "type": "function",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "EndDate",
        "func": "// Get the timestamp value from the payload\nconst timestamp = msg.payload;\n\n// Convert the timestamp to a Date object\nconst date = new Date(timestamp);\n\n// Format the date and time as an ISO string\nconst formattedDateTime = date.toISOString();\n\nflow.set(\"datefilter.end\", formattedDateTime)\n// Return the message object\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "c4635a4d9b49d9a0",
        "type": "function",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "StartDate",
        "func": "// Get the timestamp value from the payload\nconst timestamp = msg.payload;\n\n// Convert the timestamp to a Date object\nconst date = new Date(timestamp);\n\n// Format the date and time as an ISO string\nconst formattedDateTime = date.toISOString();\n\n\nflow.set(\"datefilter.start\", formattedDateTime)\n// Return the message object\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "81bcf1ba3e8b9088",
        "type": "function",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "Message by date and zone",
        "func": "var sql =flow.get(\"sql\"); \nvar datefilter = flow.get(\"datefilter\"); \nvar zone_id = datefilter.zone;\nvar start = datefilter.start;\nvar end = datefilter.end;\n\nif (start < end && zone_id !== undefined && zone_id !== null && zone_id !== \"\" ) {\nmsg.topic = sql.reqbydate;\n\nmsg.payload = {\n    zone_id: zone_id,\n    start: start,\n    end: end\n\n};\n    return [msg, null];\n}\nelse msg.payload =\"wrong date range or zone not selected\";\n\nreturn [null, msg];;\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 400,
        "wires": [
            [],
            [
                "a6f9d677aee07342"
            ]
        ]
    },
    {
        "id": "1e3d60fb53c7d220",
        "type": "ui_text_input",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "",
        "label": "from",
        "tooltip": "",
        "group": "2c1e29dbc0060ca5",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "datetime-local",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 490,
        "y": 100,
        "wires": [
            [
                "c4635a4d9b49d9a0"
            ]
        ]
    },
    {
        "id": "435d5c7cdf1760ea",
        "type": "ui_text_input",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "",
        "label": "to",
        "tooltip": "",
        "group": "ba8f350ed65a20c8",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "datetime-local",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 490,
        "y": 140,
        "wires": [
            [
                "5e31fc4740ac2f7e"
            ]
        ]
    },
    {
        "id": "57293529112bba1e",
        "type": "switch",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "refresh zones",
        "property": "name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Message",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 710,
        "y": 220,
        "wires": [
            [
                "14e8710f5e014474"
            ]
        ]
    },
    {
        "id": "8623e2092ee7199d",
        "type": "ui_ui_control",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "",
        "events": "change",
        "x": 510,
        "y": 220,
        "wires": [
            [
                "57293529112bba1e"
            ]
        ]
    },
    {
        "id": "a6f9d677aee07342",
        "type": "ui_toast",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1210,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "e423f6629dc6cafe",
        "type": "csv",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": "",
        "include_null_values": "",
        "x": 750,
        "y": 360,
        "wires": [
            [
                "df6b021119c043cb"
            ]
        ]
    },
    {
        "id": "df6b021119c043cb",
        "type": "file",
        "z": "b32e6acae6779585",
        "g": "9ed883390983f1a9",
        "name": "",
        "filename": "data.csv",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 900,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "0b1ac02ec922757d",
        "type": "ui_button",
        "z": "d371f97991037310",
        "name": "",
        "group": "f2e382f4787dd001",
        "order": 1,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Get Messages",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 340,
        "y": 680,
        "wires": [
            [
                "636bfc5018d524f6"
            ]
        ]
    },
    {
        "id": "5f7c60b2ed9fafa6",
        "type": "function",
        "z": "d371f97991037310",
        "name": "node sql queries as object",
        "func": "",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\nvar queries = {\n  //  reqall: \"SELECT fd.id, fd.datetime, fd.dev_eui, fd.hotspot_name,  fd.sos_status, fd.sos_validated, fd.spreading_factor, fd.snr, fd.rssi, fn.name AS node_name, fn.latitude AS node_latitude, fn.longitude AS node_longitude, hs.latitude AS hotspot_latitude, hs.longitude AS hotspot_longitude, s.name AS supervisor_name, s.mobile_number, z.name AS zone_name FROM sos_messages; AS fd JOIN fire_nodes AS fn ON fd.dev_eui = fn.dev_eui JOIN hotspots AS hs ON fd.hotspot_name = hs.name JOIN supervisor_zones AS sz ON fn.zone_id = sz.zone_id JOIN supervisors AS s ON sz.supervisor_id = s.id JOIN zones AS z ON fn.zone_id = z.id ORDER BY fd.datetime DESC ;\",\n  reqbydate: \"SELECT fd.id, fd.datetime, fd.dev_eui, fd.hotspot_name, fd.port,  fd.sos_status, fd.sos_validated, fd.spreading_factor, fd.snr, fd.rssi, fn.name AS node_name, fn.latitude AS node_latitude, fn.longitude AS node_longitude, hs.latitude AS hotspot_latitude, hs.longitude AS hotspot_longitude, s.name AS supervisor_name, s.mobile_number, z.name AS zone_name FROM sos_messages AS fd JOIN fire_nodes AS fn ON fd.dev_eui = fn.dev_eui JOIN hotspots AS hs ON fd.hotspot_name = hs.name JOIN supervisor_zones AS sz ON fn.zone_id = sz.zone_id JOIN supervisors AS s ON sz.supervisor_id = s.id JOIN zones AS z ON fn.zone_id = z.id WHERE fd.datetime BETWEEN :start AND :end AND z.id = :zone_id  ORDER BY fd.datetime DESC; \",\n  //  getzones: \"SELECT * FROM zones;\"\n};\n\n// Save the variable in the Node-RED flow context\nflow.set('sql', queries);\nflow.set('datefilter');\n",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "147a03a88e24ea55",
        "type": "switch",
        "z": "d371f97991037310",
        "name": "sql.reqbydate",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "sql.reqbydate",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 275,
        "y": 400,
        "wires": [
            [
                "e08fcc05d304ca69"
            ]
        ],
        "l": false
    },
    {
        "id": "e08fcc05d304ca69",
        "type": "function",
        "z": "d371f97991037310",
        "name": "convert datetime string to German format",
        "func": "// Function to convert datetime string to German format\nfunction formatDateToGerman(datetime) {\n    const options = { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit', timeZone: 'Europe/Berlin' };\n    return new Intl.DateTimeFormat('de-DE', options).format(datetime);\n}\n\n// Process the payload\nif (Array.isArray(msg.payload)) {\n    msg.payload.forEach((item, index) => {\n        const datetimeString = item.datetime;\n        const datetime = new Date(datetimeString);\n        msg.payload[index].germanDatetime = formatDateToGerman(datetime);\n    });\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 425,
        "y": 400,
        "wires": [
            [
                "2e87399a6bbeb4b7"
            ]
        ],
        "l": false
    },
    {
        "id": "2e87399a6bbeb4b7",
        "type": "ui_table",
        "z": "d371f97991037310",
        "group": "ba4694cd6473a54c",
        "name": "",
        "order": 1,
        "width": 23,
        "height": 17,
        "columns": [
            {
                "field": "No.",
                "title": "",
                "width": "30",
                "align": "left",
                "formatter": "rownum",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "id",
                "title": "id",
                "width": "30",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "node_name",
                "title": "Name",
                "width": "80",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "node_latitude",
                "title": "Latitude",
                "width": "80",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "node_longitude",
                "title": "Longitude",
                "width": "80",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "hotspot_name",
                "title": "Hotspot",
                "width": "130",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "germanDatetime",
                "title": "Date Time",
                "width": "170",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "sos_status",
                "title": "🆘",
                "width": "50",
                "align": "left",
                "formatter": "tickCross",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "spreading_factor",
                "title": "SF",
                "width": "80",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "zone_name",
                "title": "Zone",
                "width": "80",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "supervisor_name",
                "title": "supervisor",
                "width": "170",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 810,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "1af7b18f3b6e88ae",
        "type": "function",
        "z": "d371f97991037310",
        "name": "get zones from db",
        "func": "\nmsg.options = global.get(\"zonelist\");\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 685,
        "y": 320,
        "wires": [
            [
                "07b2743daa51f07a"
            ]
        ],
        "l": false
    },
    {
        "id": "07b2743daa51f07a",
        "type": "ui_dropdown",
        "z": "d371f97991037310",
        "name": "",
        "label": "zone",
        "tooltip": "",
        "place": "Select option",
        "group": "331c370556bfc7bd",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 790,
        "y": 320,
        "wires": [
            [
                "a965d7a1bc4a601b"
            ]
        ]
    },
    {
        "id": "a965d7a1bc4a601b",
        "type": "change",
        "z": "d371f97991037310",
        "name": "zone_id",
        "rules": [
            {
                "t": "set",
                "p": "datefilter.zone",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 875,
        "y": 320,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "2f59bb834cffb682",
        "type": "function",
        "z": "d371f97991037310",
        "name": "EndDate",
        "func": "// Get the timestamp value from the payload\nconst timestamp = msg.payload;\n\n// Convert the timestamp to a Date object\nconst date = new Date(timestamp);\n\n// Format the date and time as an ISO string\nconst formattedDateTime = date.toISOString();\n\nflow.set(\"datefilter.end\", formattedDateTime)\n// Return the message object\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "e9b89eb6bbbdaa2e",
        "type": "function",
        "z": "d371f97991037310",
        "name": "StartDate",
        "func": "// Get the timestamp value from the payload\nconst timestamp = msg.payload;\n\n// Convert the timestamp to a Date object\nconst date = new Date(timestamp);\n\n// Format the date and time as an ISO string\nconst formattedDateTime = date.toISOString();\n\n\nflow.set(\"datefilter.start\", formattedDateTime)\n// Return the message object\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "636bfc5018d524f6",
        "type": "function",
        "z": "d371f97991037310",
        "name": "Message by date and zone",
        "func": " var sql =flow.get(\"sql\"); \nvar datefilter = flow.get(\"datefilter\"); \nvar zone_id = datefilter.zone;\nvar start = datefilter.start;\nvar end = datefilter.end;\n\nif (start < end && zone_id !== undefined && zone_id !== null && zone_id !== \"\" ) {\nmsg.topic = sql.reqbydate;\n\nmsg.payload = {\n    zone_id: zone_id,\n    start: start,\n    end: end\n\n};\n    return [msg, null];\n}\nelse msg.payload =\"wrong date range or zone not selected\";\n\nreturn [null, msg];;\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 680,
        "wires": [
            [],
            [
                "762492870d5d7b6a"
            ]
        ]
    },
    {
        "id": "cb4fcb6207168805",
        "type": "ui_text_input",
        "z": "d371f97991037310",
        "name": "",
        "label": "from",
        "tooltip": "",
        "group": "7489f633877e3b17",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "datetime-local",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 490,
        "y": 540,
        "wires": [
            [
                "e9b89eb6bbbdaa2e"
            ]
        ]
    },
    {
        "id": "2e19bc5a063f79ce",
        "type": "ui_text_input",
        "z": "d371f97991037310",
        "name": "",
        "label": "to",
        "tooltip": "",
        "group": "967e611fbc5d885c",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "datetime-local",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 490,
        "y": 580,
        "wires": [
            [
                "2f59bb834cffb682"
            ]
        ]
    },
    {
        "id": "5c01ebe4bb562f3f",
        "type": "switch",
        "z": "d371f97991037310",
        "name": "refresh zones",
        "property": "name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SOS Messages",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 500,
        "y": 320,
        "wires": [
            [
                "1af7b18f3b6e88ae"
            ]
        ]
    },
    {
        "id": "de0a7c82789b046b",
        "type": "ui_ui_control",
        "z": "d371f97991037310",
        "name": "",
        "events": "change",
        "x": 300,
        "y": 320,
        "wires": [
            [
                "5c01ebe4bb562f3f"
            ]
        ]
    },
    {
        "id": "762492870d5d7b6a",
        "type": "ui_toast",
        "z": "d371f97991037310",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 970,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "abef7e13bf7fda0a",
        "type": "sms77-sms",
        "z": "6b1a3c1500858386",
        "config": "9c9632a3b154a09d",
        "delay": "",
        "from": "",
        "foreign_id": "",
        "label": "",
        "message": "",
        "name": "Messaging Gateway",
        "recipients": "",
        "ttl": "",
        "udh": "",
        "x": 870,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "fb36a8e2cdcbe2f2",
        "type": "function",
        "z": "6b1a3c1500858386",
        "name": "sos to sms",
        "func": "// Set the input values\nmsg.zone_name = msg.payload.zone_name;\nmsg.node_name = msg.payload.node_name;\nmsg.node_latitude = msg.payload.node_latitude;\nmsg.node_longitude = msg.payload.node_longitude;\nmsg.supervisor_name = msg.payload.supervisor_name;\nmsg.mobile_number = msg.payload.mobile_number;\n\n// Create the Google Maps link from node_latitude and node_longitude\nvar googleMapsLink = \"https://maps.google.com/?q=\" + msg.node_latitude + \",\" + msg.node_longitude;\n\n// Create the message payload\nmsg.payload = \"Alarm! \" + msg.supervisor_name + \": there is an SOS signal in \" + msg.zone_name + \", \" + msg.node_name + \": \" + googleMapsLink;\n\n// Set the message topic\nmsg.topic = msg.mobile_number;\n\n// Return the message object\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 160,
        "wires": [
            [
                "abef7e13bf7fda0a"
            ]
        ]
    },
    {
        "id": "136bf140e76408b4",
        "type": "sms77-voice",
        "z": "6b1a3c1500858386",
        "config": "9c9632a3b154a09d",
        "from": "+15784448221",
        "json": "false",
        "message": "",
        "name": "Messaging Gateway",
        "recipients": "",
        "xml": "false",
        "x": 930,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "38b6a92f81f1755e",
        "type": "split",
        "z": "6b1a3c1500858386",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 410,
        "y": 120,
        "wires": [
            [
                "fb36a8e2cdcbe2f2",
                "13be2bcb859bf296",
                "c4b3f656c1db04bd"
            ]
        ]
    },
    {
        "id": "8c1264366eb58bd4",
        "type": "ui_audio",
        "z": "6b1a3c1500858386",
        "name": "",
        "group": "dashboard_group",
        "voice": "Google US English",
        "always": true,
        "x": 940,
        "y": 340,
        "wires": []
    },
    {
        "id": "13be2bcb859bf296",
        "type": "function",
        "z": "6b1a3c1500858386",
        "name": "sos to Voice",
        "func": "// Set the input values\nmsg.zone_name = msg.payload.zone_name;\nmsg.node_name = msg.payload.node_name;\nmsg.node_latitude = msg.payload.node_latitude;\nmsg.node_longitude = msg.payload.node_longitude;\nmsg.supervisor_name = msg.payload.supervisor_name;\nmsg.mobile_number = msg.payload.mobile_number;\n\n// Create the Google Maps link from node_latitude and node_longitude\n//var googleMapsLink = \"https://maps.google.com/?q=\" + msg.node_latitude + \",\" + msg.node_longitude;\n\n// Create the message payload\nmsg.payload = \"Alarm! Alarm! Alarm! \" + msg.supervisor_name + \" there is an SOS signal in \" + msg.zone_name + \", \" + msg.node_name ;\n\n// Set the message topic\nmsg.topic = msg.mobile_number;\n\n// Return the message object\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 200,
        "wires": [
            [
                "559cbd2b46e78e2c"
            ]
        ]
    },
    {
        "id": "a3e9f66f361209ca",
        "type": "function",
        "z": "6b1a3c1500858386",
        "name": "fire to sms",
        "func": "// Set the input values\nmsg.zone_name = msg.payload.fire_zone_name;\nmsg.node_name = msg.payload.node_name;\nmsg.node_latitude = msg.payload.node_latitude;\nmsg.node_longitude = msg.payload.node_longitude;\nmsg.supervisor_name = msg.payload.supervisor_name;\nmsg.mobile_number = msg.payload.mobile_number;\n\n// Create the Google Maps link from node_latitude and node_longitude\nvar googleMapsLink = \"https://maps.google.com/?q=\" + msg.node_latitude + \",\" + msg.node_longitude;\n\n// Create the message payload\nmsg.payload = \"Fire ! \" + msg.supervisor_name + \": there is an Fire signal in \" + msg.zone_name + \", \" + msg.node_name + \": \" + googleMapsLink;\n\n// Set the message topic\nmsg.topic = msg.mobile_number;\n\n// Return the message object\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 380,
        "wires": [
            [
                "abef7e13bf7fda0a"
            ]
        ]
    },
    {
        "id": "e8d104b32e9d2270",
        "type": "function",
        "z": "6b1a3c1500858386",
        "name": "fire to Voice",
        "func": "// Set the input values\nmsg.zone_name = msg.payload.fire_zone_name;\nmsg.node_name = msg.payload.node_name;\nmsg.node_latitude = msg.payload.node_latitude;\nmsg.node_longitude = msg.payload.node_longitude;\nmsg.supervisor_name = msg.payload.supervisor_name;\nmsg.mobile_number = msg.payload.mobile_number;\n\n// Create the Google Maps link from node_latitude and node_longitude\n//var googleMapsLink = \"https://maps.google.com/?q=\" + msg.node_latitude + \",\" + msg.node_longitude;\n\n// Create the message payload\nmsg.payload = \"Fire ! Fire ! Fire! \" + msg.supervisor_name + \": there is an Fire signal in \" + msg.zone_name + \", \" + msg.node_name ;\n\n// Set the message topic\nmsg.topic = msg.mobile_number;\n\n// Return the message object\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 420,
        "wires": [
            [
                "559cbd2b46e78e2c"
            ]
        ]
    },
    {
        "id": "e4effa5f95dedd2d",
        "type": "split",
        "z": "6b1a3c1500858386",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 430,
        "y": 480,
        "wires": [
            [
                "a3e9f66f361209ca",
                "e8d104b32e9d2270",
                "c809b7a7adeb74f2"
            ]
        ]
    },
    {
        "id": "64a84f9b93497c29",
        "type": "ui_toast",
        "z": "6b1a3c1500858386",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 950,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "c3f1b170a1c63294",
        "type": "switch",
        "z": "6b1a3c1500858386",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "queries.sos_super",
                "vt": "global"
            },
            {
                "t": "eq",
                "v": "queries.fire_super",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 150,
        "y": 220,
        "wires": [
            [
                "38b6a92f81f1755e"
            ],
            [
                "e4effa5f95dedd2d"
            ]
        ]
    },
    {
        "id": "70866262686fe074",
        "type": "change",
        "z": "6b1a3c1500858386",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Alarm!!!!!",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 855,
        "y": 400,
        "wires": [
            [
                "64a84f9b93497c29"
            ]
        ],
        "l": false
    },
    {
        "id": "9368370735331bfb",
        "type": "mqtt in",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "MQTT Server Receive from Helium Network",
        "topic": "helium",
        "qos": "0",
        "datatype": "json",
        "broker": "c946664372d17fb2",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 210,
        "y": 360,
        "wires": [
            [
                "4563051b2368a60c",
                "00c8222b274d0877"
            ]
        ]
    },
    {
        "id": "c3bdcd536fc4074c",
        "type": "Stackhero-MySQL",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "server": "531e613ab473082b",
        "name": "",
        "x": 180,
        "y": 1260,
        "wires": [
            [
                "1db854a1d573bb56",
                "00d78067f8909d5d",
                "42b89af1b64730bd"
            ]
        ]
    },
    {
        "id": "4563051b2368a60c",
        "type": "switch",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "app Port 1 SoS / 2 Regulare Message",
        "property": "payload.port",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 550,
        "y": 440,
        "wires": [
            [
                "dc2624aab1d16760",
                "1312d39f67386f88",
                "d99af6adec090d36",
                "9a2f98bb2428bafc"
            ],
            [
                "dc2624aab1d16760",
                "de1148d11593b7b7",
                "0429b845e02579e0"
            ]
        ]
    },
    {
        "id": "dc2624aab1d16760",
        "type": "function",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "Add Hotspot to the Database",
        "func": "\nvar lon = msg.payload.hotspots[0].long;\nvar lat = msg.payload.hotspots[0].lat ;\nvar name = msg.payload.hotspots[0].name;\n\nmsg.topic = `\n    INSERT IGNORE INTO hotspots (name, latitude, longitude)\n    VALUES (:name, :latitude, :longitude)\n`;\n\nmsg.payload = {\n\n    name: name,\n    latitude: lat,\n    longitude: lon,\n};\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 340,
        "wires": [
            [
                "59a0802f522499e3"
            ]
        ]
    },
    {
        "id": "c495cc973c3df3d7",
        "type": "link in",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "sql in",
        "links": [
            "d8948eec15b174e0",
            "59a0802f522499e3",
            "b024385e8b3a5c88",
            "883073e5eeb623c9"
        ],
        "x": 65,
        "y": 1260,
        "wires": [
            [
                "c3bdcd536fc4074c"
            ]
        ]
    },
    {
        "id": "59a0802f522499e3",
        "type": "link out",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "Hotspots out",
        "mode": "link",
        "links": [
            "c495cc973c3df3d7",
            "8e034c05eaa23105"
        ],
        "x": 1435,
        "y": 440,
        "wires": []
    },
    {
        "id": "fe6c6f35860b8305",
        "type": "subflow:de3b867568fe76b6",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "",
        "x": 660,
        "y": 1160,
        "wires": [
            [
                "b024385e8b3a5c88"
            ]
        ]
    },
    {
        "id": "47263aace55a064c",
        "type": "catch",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "",
        "scope": [
            "c3bdcd536fc4074c"
        ],
        "uncaught": false,
        "x": 200,
        "y": 1340,
        "wires": [
            [
                "59886134924cddea",
                "1db854a1d573bb56"
            ]
        ]
    },
    {
        "id": "42b4408505516a8d",
        "type": "subflow:908ed317fb868fc9",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "",
        "x": 670,
        "y": 1280,
        "wires": [
            [
                "b024385e8b3a5c88"
            ]
        ]
    },
    {
        "id": "686dd8385a46ac82",
        "type": "subflow:69337b7ed7551a53",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "",
        "x": 670,
        "y": 1320,
        "wires": [
            [
                "b024385e8b3a5c88"
            ]
        ]
    },
    {
        "id": "228631fe5e14fc09",
        "type": "subflow:8324692507d46007",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "",
        "x": 660,
        "y": 1360,
        "wires": [
            [
                "b024385e8b3a5c88"
            ]
        ]
    },
    {
        "id": "f9ac0c6146f66026",
        "type": "function",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "fire_detection_regular_messages",
        "func": "var dev_eui = msg.payload.dev_eui;\nvar hotspot_name = msg.payload.hotspots[0].name;\nvar port = msg.payload.port;\nvar temperature = msg.payload.decoded.payload[1].value;\nvar humidity = msg.payload.decoded.payload[2].value;\nvar battery = (msg.payload.decoded.payload[3].value);\nvar barometer = (msg.payload.decoded.payload[4].value);\nvar air_resistance = (msg.payload.decoded.payload[5].value)/1000.00;\nvar fire_status = (msg.payload.decoded.payload[6].value);\nvar spreading_factor = (msg.payload.hotspots[0].spreading);\nvar snr = (msg.payload.hotspots[0].snr);\nvar rssi = (msg.payload.hotspots[0].rssi);\n\n\n\nmsg.topic = `\n    INSERT INTO fire_detection_regular_messages (dev_eui, hotspot_name, port, temperature, humidity, barometer, air_resistance, fire_status, fire_validated, battery, spreading_factor, snr, rssi)\n    VALUES (:dev_eui, :hotspot_name, :port, :temperature, :humidity, :barometer, :air_resistance, :fire_status, :fire_validated, :battery, :spreading_factor, :snr, :rssi)\n`;\n\nmsg.payload = {\n    dev_eui: dev_eui,\n    hotspot_name: hotspot_name,\n    port: port,\n    temperature: temperature,\n    humidity: humidity,\n    barometer: barometer,\n    air_resistance: air_resistance,\n    fire_status: fire_status,\n    fire_validated: null,\n    battery: battery,\n    spreading_factor: spreading_factor,\n    snr: snr,\n    rssi: rssi\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 520,
        "wires": [
            [
                "59a0802f522499e3",
                "5f0cff1223c22312"
            ]
        ]
    },
    {
        "id": "1f15e3ba7d59c80e",
        "type": "inject",
        "z": "55bf3aabfbc77f2a",
        "g": "0577e14e83b2e808",
        "name": "Set a interval every 2 hours to monitor the status of the node.",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "7200",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 310,
        "y": 120,
        "wires": [
            [
                "f2688b345002a53b"
            ]
        ]
    },
    {
        "id": "f2688b345002a53b",
        "type": "function",
        "z": "55bf3aabfbc77f2a",
        "g": "0577e14e83b2e808",
        "name": "check nodes offline or not",
        "func": "var queries = global.get(\"queries\"); \nmsg.topic = queries.checknode;\n\nmsg.payload = {};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 120,
        "wires": [
            [
                "883073e5eeb623c9"
            ]
        ]
    },
    {
        "id": "8614efb4fc63a225",
        "type": "function",
        "z": "55bf3aabfbc77f2a",
        "g": "0577e14e83b2e808",
        "name": "Update the node status to 'offline' if the last message received is older than 6 hours",
        "func": "const dev_eui_list = msg.payload.map(obj => obj.dev_eui);\n\nif (dev_eui_list.length > 0) {\n    msg.topic = \"UPDATE fire_nodes SET status = false WHERE dev_eui IN (:dev_eui_list);\";\n    msg.payload = { dev_eui_list: dev_eui_list };\n    return msg;\n} else {\n    return null;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 180,
        "wires": [
            [
                "883073e5eeb623c9"
            ]
        ]
    },
    {
        "id": "de1148d11593b7b7",
        "type": "function",
        "z": "55bf3aabfbc77f2a",
        "g": "0577e14e83b2e808",
        "name": "Update the node status to 'online' upon receiving a message",
        "func": "msg.topic = \"UPDATE fire_nodes SET status = true WHERE dev_eui = :dev_eui;\";\nmsg.payload = { dev_eui: msg.payload.dev_eui };\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 240,
        "wires": [
            [
                "883073e5eeb623c9"
            ]
        ]
    },
    {
        "id": "f193b833115d2689",
        "type": "subflow:77609808ed89764b",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "",
        "x": 660,
        "y": 1120,
        "wires": [
            [
                "b024385e8b3a5c88"
            ]
        ]
    },
    {
        "id": "ff014e0cb38fa5a2",
        "type": "subflow:b32e6acae6779585",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "",
        "x": 660,
        "y": 1200,
        "wires": [
            [
                "b024385e8b3a5c88"
            ]
        ]
    },
    {
        "id": "39edcd33d9a252ef",
        "type": "switch",
        "z": "55bf3aabfbc77f2a",
        "g": "0577e14e83b2e808",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "sql.checknode",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 165,
        "y": 180,
        "wires": [
            [
                "8614efb4fc63a225"
            ]
        ],
        "l": false
    },
    {
        "id": "a042c70dd41ed1f1",
        "type": "function",
        "z": "55bf3aabfbc77f2a",
        "name": "Define SQL query as an object ",
        "func": "",
        "outputs": 1,
        "noerr": 0,
        "initialize": "\n\nvar queries = {\n    \n    sos_super:\"SELECT z.name AS zone_name, fn.dev_eui, fn.name AS node_name, fn.latitude AS node_latitude, fn.longitude AS node_longitude,\"+\n    \" s.name AS supervisor_name, s.mobile_number FROM zones z\"+\n    \" JOIN fire_nodes fn ON z.id = fn.zone_id JOIN supervisor_zones sz ON z.id = sz.zone_id \"+\n    \"JOIN supervisors s ON sz.supervisor_id = s.id WHERE fn.dev_eui = :dev_eui;\",\n\n    fire_super: \"SELECT z.name AS fire_zone_name, fn.dev_eui, fn.name AS node_name, fn.latitude AS node_latitude, fn.longitude AS node_longitude,\"+\n    \" s.name AS supervisor_name, s.mobile_number FROM zones z\"+\n    \" JOIN fire_nodes fn ON z.id = fn.zone_id JOIN supervisor_zones sz ON z.id = sz.zone_id \"+\n    \"JOIN supervisors s ON sz.supervisor_id = s.id WHERE fn.dev_eui = :dev_eui;\",\n\n    checknode: \"SELECT dev_eui, MAX(datetime) AS last_datetime FROM fire_detection_regular_messages \"+\n    \" GROUP BY dev_eui HAVING TIMESTAMPDIFF(MINUTE, MAX(datetime), NOW()) > 360;\"\n};\n\n// Save the variable in the Node-RED global context\nglobal.set('queries', queries);\n\n",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "e81c03f8f92d41c8",
        "type": "function",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "Add SoS messages to the Database",
        "func": "\nvar sos_status = msg.payload.decoded.payload[0].value;\n\nvar dev_eui = msg.payload.dev_eui;\nvar hotspot_name = msg.payload.hotspots[0].name;\nvar port = msg.payload.port;\n\nvar spreading_factor = (msg.payload.hotspots[0].spreading);\nvar snr = (msg.payload.hotspots[0].snr);\nvar rssi = (msg.payload.hotspots[0].rssi);\n\nmsg.topic = \"INSERT INTO sos_messages (dev_eui, hotspot_name, port,sos_status,sos_validated , spreading_factor, snr, rssi)\"\n+\" VALUES (:dev_eui, :hotspot_name, :port,  :sos_status, :sos_validated ,:spreading_factor, :snr, :rssi);\"\n\nmsg.payload = {\n    dev_eui: dev_eui,\n    hotspot_name: hotspot_name,\n    port: port,\n    sos_status: sos_status,\n    sos_validated: null,\n    spreading_factor: spreading_factor,\n    snr: snr,\n    rssi: rssi\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 420,
        "wires": [
            [
                "59a0802f522499e3"
            ]
        ]
    },
    {
        "id": "9a2f98bb2428bafc",
        "type": "function",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "If SoS massage received, provide the supervisor's contact details.",
        "func": "var queries = global.get(\"queries\");\n\nvar dev_eui = msg.payload.dev_eui;\n\n\nmsg.topic = queries.sos_super;\n\nmsg.payload = {\n    dev_eui: dev_eui,\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 480,
        "wires": [
            [
                "59a0802f522499e3"
            ]
        ]
    },
    {
        "id": "b024385e8b3a5c88",
        "type": "link out",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "sql in",
        "mode": "link",
        "links": [
            "c495cc973c3df3d7"
        ],
        "x": 915,
        "y": 1240,
        "wires": []
    },
    {
        "id": "5f0cff1223c22312",
        "type": "function",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "If the fire alarm has been activated, provide the supervisor's contact details.",
        "func": "if (msg.payload.fire_status ===1){\n    var queries = global.get(\"queries\");\n\nvar dev_eui = msg.payload.dev_eui;\n\n    msg.topic = queries.fire_super;\n\nmsg.payload = {\n    dev_eui: dev_eui,\n};\n    return msg;\n}\nelse\nreturn null;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 580,
        "wires": [
            [
                "59a0802f522499e3"
            ]
        ]
    },
    {
        "id": "59886134924cddea",
        "type": "change",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 295,
        "y": 1380,
        "wires": [
            [
                "c024360a7d70cefb"
            ]
        ],
        "l": false
    },
    {
        "id": "1a151aca966ec287",
        "type": "subflow:d371f97991037310",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "",
        "x": 660,
        "y": 1240,
        "wires": [
            [
                "b024385e8b3a5c88"
            ]
        ]
    },
    {
        "id": "e5b0cf849dc5f19c",
        "type": "inject",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "Virtual Node1 Fire",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "helium",
        "payload": "{\"app_eui\":\"6081F9CF5E739AAF\",\"dc\":{\"balance\":977768,\"nonce\":2},\"decoded\":{\"payload\":[{\"channel\":1,\"name\":\"temperature\",\"type\":103,\"unit\":\"celcius\",\"value\":17.4},{\"channel\":1,\"name\":\"temperature\",\"type\":103,\"unit\":\"celsius\",\"value\":17.4},{\"channel\":1,\"name\":\"humidity\",\"type\":104,\"unit\":\"percent\",\"value\":60},{\"channel\":1,\"name\":\"power\",\"type\":128,\"unit\":\"W\",\"value\":59},{\"channel\":1,\"name\":\"barometer\",\"type\":115,\"unit\":\"hPa\",\"value\":994.4},{\"channel\":1,\"name\":\"frequency\",\"type\":118,\"unit\":\"Hz\",\"value\":79289},{\"channel\":1,\"last\":true,\"name\":\"switch\",\"type\":142,\"value\":1}],\"status\":\"success\"},\"dev_eui\":\"2081F95106020818\",\"devaddr\":\"15000048\",\"fcnt\":144,\"hotspots\":[{\"channel\":0,\"frequency\":867.1,\"hold_time\":0,\"id\":\"112Nyq8NBpr4W27cKGVHNkL8MjusVWm6jwZGnf93VwhyA3FRx7z9\",\"lat\":49.42689087891593,\"long\":7.741254894944815,\"name\":\"main-lava-alpaca\",\"reported_at\":9,\"rssi\":-135,\"snr\":-13.800000190734863,\"spreading\":\"SF9BW125\",\"status\":\"success\"}],\"id\":\"6132fa37-a51b-4e42-91ef-49c0b29bc5da\",\"metadata\":{\"adr_allowed\":true,\"cf_list_enabled\":false,\"labels\":[{\"id\":\"f4772e34-30f1-4941-855e-21c9ddc9f2e2\",\"name\":\"Fire Sensor Nodes\",\"organization_id\":\"7e107e49-f8b4-4baf-9ed2-42cab8320896\"}],\"multi_buy\":1,\"organization_id\":\"7e107e49-f8b4-4baf-9ed2-42cab8320896\",\"preferred_hotspots\":[],\"rx_delay\":1,\"rx_delay_actual\":1,\"rx_delay_state\":\"rx_delay_established\"},\"name\":\"Node1\",\"payload\":\"AWcArgFoeAGAADsBcybYAXYAATW5AY4A\",\"payload_size\":24,\"port\":2,\"raw_packet\":\"gBUAAEiAkAACWr6AROlJODoa6C+vV4Vn7eAIZOqDNgJ2O6e1zg==\",\"replay\":false,\"reported_at\":1681724422624,\"type\":\"uplink\",\"uuid\":\"35057225-5981-4ccf-b0bf-e7aa6f397c86\"}",
        "payloadType": "json",
        "x": 170,
        "y": 480,
        "wires": [
            [
                "0c90ddde59815454"
            ]
        ]
    },
    {
        "id": "0c90ddde59815454",
        "type": "change",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.hotspots[0].reported_at",
                "pt": "msg",
                "to": "",
                "tot": "date"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 345,
        "y": 460,
        "wires": [
            [
                "4563051b2368a60c"
            ]
        ],
        "l": false
    },
    {
        "id": "c024360a7d70cefb",
        "type": "ui_toast",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "DB error Catch",
        "x": 440,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "00d78067f8909d5d",
        "type": "subflow:6b1a3c1500858386",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "",
        "x": 410,
        "y": 1120,
        "wires": [
            [
                "f193b833115d2689"
            ]
        ]
    },
    {
        "id": "187b8dbdf76d5725",
        "type": "link in",
        "z": "55bf3aabfbc77f2a",
        "g": "0577e14e83b2e808",
        "name": "link in 1",
        "links": [
            "42b89af1b64730bd",
            "648f148af21e0305"
        ],
        "x": 105,
        "y": 180,
        "wires": [
            [
                "39edcd33d9a252ef"
            ]
        ]
    },
    {
        "id": "42b89af1b64730bd",
        "type": "link out",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "sql out",
        "mode": "link",
        "links": [
            "187b8dbdf76d5725"
        ],
        "x": 295,
        "y": 1280,
        "wires": []
    },
    {
        "id": "883073e5eeb623c9",
        "type": "link out",
        "z": "55bf3aabfbc77f2a",
        "g": "0577e14e83b2e808",
        "name": "Hotspots out",
        "mode": "link",
        "links": [
            "c495cc973c3df3d7",
            "8e034c05eaa23105"
        ],
        "x": 855,
        "y": 200,
        "wires": []
    },
    {
        "id": "5c95fd521be37dc4",
        "type": "inject",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "Virtual Node1",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1800",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "helium",
        "payload": "{\"app_eui\":\"6081F9CF5E739AAF\",\"dc\":{\"balance\":977768,\"nonce\":2},\"decoded\":{\"payload\":[{\"channel\":1,\"name\":\"temperature\",\"type\":103,\"unit\":\"celcius\",\"value\":17.4},{\"channel\":1,\"name\":\"temperature\",\"type\":103,\"unit\":\"celsius\",\"value\":17.4},{\"channel\":1,\"name\":\"humidity\",\"type\":104,\"unit\":\"percent\",\"value\":60},{\"channel\":1,\"name\":\"power\",\"type\":128,\"unit\":\"W\",\"value\":59},{\"channel\":1,\"name\":\"barometer\",\"type\":115,\"unit\":\"hPa\",\"value\":994.4},{\"channel\":1,\"name\":\"frequency\",\"type\":118,\"unit\":\"Hz\",\"value\":79289},{\"channel\":1,\"last\":true,\"name\":\"switch\",\"type\":142,\"value\":0}],\"status\":\"success\"},\"dev_eui\":\"2081F95106020818\",\"devaddr\":\"15000048\",\"fcnt\":144,\"hotspots\":[{\"channel\":0,\"frequency\":867.1,\"hold_time\":0,\"id\":\"112Nyq8NBpr4W27cKGVHNkL8MjusVWm6jwZGnf93VwhyA3FRx7z9\",\"lat\":49.42689087891593,\"long\":7.741254894944815,\"name\":\"main-lava-alpaca\",\"reported_at\":9,\"rssi\":-135,\"snr\":-13.800000190734863,\"spreading\":\"SF9BW125\",\"status\":\"success\"}],\"id\":\"6132fa37-a51b-4e42-91ef-49c0b29bc5da\",\"metadata\":{\"adr_allowed\":true,\"cf_list_enabled\":false,\"labels\":[{\"id\":\"f4772e34-30f1-4941-855e-21c9ddc9f2e2\",\"name\":\"Fire Sensor Nodes\",\"organization_id\":\"7e107e49-f8b4-4baf-9ed2-42cab8320896\"}],\"multi_buy\":1,\"organization_id\":\"7e107e49-f8b4-4baf-9ed2-42cab8320896\",\"preferred_hotspots\":[],\"rx_delay\":1,\"rx_delay_actual\":1,\"rx_delay_state\":\"rx_delay_established\"},\"name\":\"Node1\",\"payload\":\"AWcArgFoeAGAADsBcybYAXYAATW5AY4A\",\"payload_size\":24,\"port\":2,\"raw_packet\":\"gBUAAEiAkAACWr6AROlJODoa6C+vV4Vn7eAIZOqDNgJ2O6e1zg==\",\"replay\":false,\"reported_at\":1681724422624,\"type\":\"uplink\",\"uuid\":\"35057225-5981-4ccf-b0bf-e7aa6f397c86\"}",
        "payloadType": "json",
        "x": 180,
        "y": 420,
        "wires": [
            [
                "0c90ddde59815454"
            ]
        ]
    },
    {
        "id": "d98e3dea16489697",
        "type": "comment",
        "z": "55bf3aabfbc77f2a",
        "g": "bd6511f3dae3faa9",
        "name": "DB to Sub Flows ",
        "info": "",
        "x": 160,
        "y": 1140,
        "wires": []
    },
    {
        "id": "5f75adfef39623e2",
        "type": "comment",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "MQTT to DB ",
        "info": "",
        "x": 150,
        "y": 320,
        "wires": []
    },
    {
        "id": "ecbb31b58326b705",
        "type": "comment",
        "z": "55bf3aabfbc77f2a",
        "g": "0577e14e83b2e808",
        "name": "check nodes Status",
        "info": "",
        "x": 170,
        "y": 80,
        "wires": []
    },
    {
        "id": "1312d39f67386f88",
        "type": "delay",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 835,
        "y": 420,
        "wires": [
            [
                "e81c03f8f92d41c8"
            ]
        ],
        "l": false
    },
    {
        "id": "0429b845e02579e0",
        "type": "delay",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 785,
        "y": 520,
        "wires": [
            [
                "7c8c7b0b10710c63",
                "f9ac0c6146f66026"
            ]
        ],
        "l": false
    },
    {
        "id": "d99af6adec090d36",
        "type": "rbe",
        "z": "55bf3aabfbc77f2a",
        "d": true,
        "g": "7f4cd69b10df6ef8",
        "name": "",
        "func": "deadbandEq",
        "gap": "20",
        "start": "",
        "inout": "in",
        "septopics": true,
        "property": "payload.hotspots[0].reported_at",
        "topi": "topic",
        "x": 835,
        "y": 460,
        "wires": [
            [
                "9a2f98bb2428bafc"
            ]
        ],
        "l": false
    },
    {
        "id": "7c8c7b0b10710c63",
        "type": "rbe",
        "z": "55bf3aabfbc77f2a",
        "d": true,
        "g": "7f4cd69b10df6ef8",
        "name": "",
        "func": "deadbandEq",
        "gap": "20",
        "start": "",
        "inout": "in",
        "septopics": true,
        "property": "payload.hotspots[0].reported_at",
        "topi": "topic",
        "x": 845,
        "y": 500,
        "wires": [
            [
                "f9ac0c6146f66026"
            ]
        ],
        "l": false
    },
    {
        "id": "00c8222b274d0877",
        "type": "debug",
        "z": "55bf3aabfbc77f2a",
        "g": "7f4cd69b10df6ef8",
        "name": "debug 2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 360,
        "wires": []
    },
    {
        "id": "f6c3fd6fd2fe7eec",
        "type": "ui_worldmap",
        "z": "55bf3aabfbc77f2a",
        "g": "2adebf06be054e3b",
        "group": "27662f8227012deb",
        "order": 5,
        "width": "14",
        "height": "4",
        "name": "",
        "lat": "49.4",
        "lon": "7.75",
        "zoom": "",
        "layer": "OSMC",
        "cluster": "5",
        "maxage": "",
        "usermenu": "hide",
        "layers": "hide",
        "panit": "true",
        "panlock": "false",
        "zoomlock": "false",
        "hiderightclick": "true",
        "coords": "none",
        "showgrid": "false",
        "showruler": "false",
        "allowFileDrop": "false",
        "path": "/worldmap",
        "overlist": "DR,CO,RA,DN,HM",
        "maplist": "OSMG,OSMC,EsriC,EsriS,EsriT,EsriDG,UKOS",
        "mapname": "",
        "mapurl": "",
        "mapopt": "",
        "mapwms": false,
        "x": 960,
        "y": 360,
        "wires": []
    },
    {
        "id": "0174124e03043ce3",
        "type": "ui_worldmap",
        "z": "55bf3aabfbc77f2a",
        "g": "b40c92170361b3e6",
        "group": "56105cd48cefe0e6",
        "order": 1,
        "width": "14",
        "height": "4",
        "name": "zone",
        "lat": "49",
        "lon": "7.75",
        "zoom": "13",
        "layer": "OSMC",
        "cluster": "",
        "maxage": "",
        "usermenu": "hide",
        "layers": "hide",
        "panit": "true",
        "panlock": "false",
        "zoomlock": "false",
        "hiderightclick": "true",
        "coords": "none",
        "showgrid": "false",
        "showruler": "false",
        "allowFileDrop": "false",
        "path": "/worldmap",
        "overlist": "DR,CO,RA,DN,HM",
        "maplist": "OSMG,OSMC,EsriC,EsriS,EsriT,EsriDG,UKOS",
        "mapname": "",
        "mapurl": "",
        "mapopt": "",
        "mapwms": false,
        "x": 1350,
        "y": 360,
        "wires": []
    },
    {
        "id": "e058e801b42f266a",
        "type": "ui_worldmap",
        "z": "55bf3aabfbc77f2a",
        "group": "0e6dd110e1df80b8",
        "order": 1,
        "width": "14",
        "height": "4",
        "name": "",
        "lat": "49",
        "lon": "7.75",
        "zoom": "15",
        "layer": "OSMC",
        "cluster": "0",
        "maxage": "",
        "usermenu": "hide",
        "layers": "hide",
        "panit": "true",
        "panlock": "false",
        "zoomlock": "false",
        "hiderightclick": "true",
        "coords": "none",
        "showgrid": "false",
        "showruler": "false",
        "allowFileDrop": "false",
        "path": "/worldmap",
        "overlist": "DR,CO,RA,DN,HM",
        "maplist": "OSMG,OSMC,EsriC,EsriS,EsriT,EsriDG,UKOS",
        "mapname": "",
        "mapurl": "",
        "mapopt": "",
        "mapwms": false,
        "x": 1640,
        "y": 280,
        "wires": []
    }
]